<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>CoAP Transport Indication</title>
<meta content="Christian AmsÃ¼ss" name="author">
<meta content="Martine Sophie Lenders" name="author">
<meta content="
       The Constrained Application Protocol (CoAP,  ) is available over different transports
(UDP, DTLS, TCP, TLS, WebSockets),
but lacks a way to unify these addresses.
This document provides terminology and provisions based on Web Linking  
and Service Bindings (SVCB,  )
to express alternative transports available to a device,
and to optimize exchanges using these. 
    " name="description">
<meta content="xml2rfc 3.29.0" name="generator">
<meta content="CoRE, Web Linking, Proxy, URI, aliasing" name="keyword">
<meta content="draft-ietf-core-transport-indication-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.29.0
    Python 3.12.11
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.3.8
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.4
    setuptools 80.9.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-core-transport-indication.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "â";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">CoAP Transport Indication</td>
<td class="right">July 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">AmsÃ¼ss &amp; Lenders</td>
<td class="center">Expires 8 January 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">CoRE</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-core-transport-indication-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-07-07" class="published">7 July 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-01-08">8 January 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. AmsÃ¼ss</div>
</div>
<div class="author">
      <div class="author-name">M. S. Lenders</div>
<div class="org">TU Dresden</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">CoAP Transport Indication</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The Constrained Application Protocol (CoAP, <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>) is available over different transports
(UDP, DTLS, TCP, TLS, WebSockets),
but lacks a way to unify these addresses.
This document provides terminology and provisions based on Web Linking <span>[<a href="#RFC8288" class="cite xref">RFC8288</a>]</span>
and Service Bindings (SVCB, <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>)
to express alternative transports available to a device,
and to optimize exchanges using these.<a href="#section-abstract-1" class="pilcrow">Â¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">Â¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://core-wg.github.io/transport-indication/">https://core-wg.github.io/transport-indication/</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-core-transport-indication/">https://datatracker.ietf.org/doc/draft-ietf-core-transport-indication/</a></span>.<a href="#section-note.1-2" class="pilcrow">Â¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        core Working Group mailing list (<span><a href="mailto:core@ietf.org">mailto:core@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/core/">https://mailarchive.ietf.org/arch/browse/core/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/core/">https://www.ietf.org/mailman/listinfo/core/</a></span>.<a href="#section-note.1-3" class="pilcrow">Â¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/core-wg/transport-indication">https://github.com/core-wg/transport-indication</a></span>.<a href="#section-note.1-4" class="pilcrow">Â¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 January 2026.<a href="#section-boilerplate.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">â²</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.Â Â <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.Â Â <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.Â Â <a href="#name-goals" class="internal xref">Goals</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.Â Â <a href="#name-core-principle-transport-en" class="internal xref">Core principle: Transport endpoints are proxies</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="auto internal xref">1.4</a>.Â Â <a href="#name-registered-names-and-transp" class="internal xref">Registered names and transport setup</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5">
                <p id="section-toc.1-1.1.2.5.1"><a href="#section-1.5" class="auto internal xref">1.5</a>.Â Â <a href="#name-concepts" class="internal xref">Concepts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.5.2.1">
                    <p id="section-toc.1-1.1.2.5.2.1.1"><a href="#section-1.5.1" class="auto internal xref">1.5.1</a>.Â Â <a href="#name-using-uris-to-identify-tran" class="internal xref">Using URIs to identify transport endpoints</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.Â Â <a href="#name-finding-suitable-endpoints-" class="internal xref">Finding suitable endpoints for a URI</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.Â Â <a href="#name-processing-scheme-and-autho" class="internal xref">Processing scheme and authority</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="auto internal xref">2.1.1</a>.Â Â <a href="#name-transport-unaware-resolutio" class="internal xref">Transport-unaware resolution</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1"><a href="#section-2.1.2" class="auto internal xref">2.1.2</a>.Â Â <a href="#name-transport-aware-resolution-" class="internal xref">Transport-aware resolution mechanisms</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.Â Â <a href="#name-explicit-proxy-indication" class="internal xref">Explicit proxy indication</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="auto internal xref">2.2.1</a>.Â Â <a href="#name-example" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.Â Â <a href="#name-operational-concerns-of-dis" class="internal xref">Operational concerns of discovered transport endpoints</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.Â Â <a href="#name-security-context-propagatio" class="internal xref">Security context propagation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="auto internal xref">3.1.1</a>.Â Â <a href="#name-exception-narrowing-securit" class="internal xref">Exception: Narrowing security requirements</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.Â Â <a href="#name-choice-of-endpoints" class="internal xref">Choice of endpoints</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.Â Â <a href="#name-selection-of-a-canonical-or" class="internal xref">Selection of a canonical origin</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="auto internal xref">3.3.1</a>.Â Â <a href="#name-unreachable-canonical-origi" class="internal xref">Unreachable canonical origin addresses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.Â Â <a href="#name-advertisement-through-a-res" class="internal xref">Advertisement through a Resource Directory</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.Â Â <a href="#name-elision-of-proxy-scheme-and" class="internal xref">Elision of Proxy-Scheme and Uri-Host</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.Â Â <a href="#name-impact-on-caches" class="internal xref">Impact on caches</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.Â Â <a href="#name-using-unique-proxies-secure" class="internal xref">Using unique proxies securely</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.Â Â <a href="#name-self-description-as-a-uniqu" class="internal xref">Self-description as a unique proxy</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.Â Â <a href="#name-third-party-proxy-services" class="internal xref">Third party proxy services</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.Â Â <a href="#name-generic-proxy-advertisement" class="internal xref">Generic proxy advertisements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.Â Â <a href="#name-client-picked-proxies" class="internal xref">Client picked proxies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.Â Â <a href="#name-service-binding-parameters-" class="internal xref">Service Binding Parameters for CoAP transports</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.Â Â <a href="#name-discovering-transport-indic" class="internal xref">Discovering transport indication details from name resolution</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.Â Â <a href="#name-service-parameters" class="internal xref">Service Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.Â Â <a href="#name-examples-of-using-name-reso" class="internal xref">Examples of using name resolution discovery and parameters</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.Â Â <a href="#name-producing-requests-for-a-di" class="internal xref">Producing requests for a discovered service</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.Â Â <a href="#name-expressing-service-paramete" class="internal xref">Expressing Service Parameters as literals</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.Â Â <a href="#name-guidance-to-upcoming-transp" class="internal xref">Guidance to upcoming transports</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.Â Â <a href="#name-security-considerations" class="internal xref">Security considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.Â Â <a href="#name-security-context-propagation" class="internal xref">Security context propagation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.Â Â <a href="#name-traffic-misdirection" class="internal xref">Traffic misdirection</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.Â Â <a href="#name-protecting-the-proxy" class="internal xref">Protecting the proxy</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>.Â <a href="#name-iana-considerations" class="internal xref">IANA considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.Â Â <a href="#name-link-relation-types" class="internal xref">Link Relation Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.Â Â <a href="#name-resource-types" class="internal xref">Resource Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.Â Â <a href="#name-tls-application-layer-proto" class="internal xref">TLS Application-Layer Protocol Negotiation (ALPN) Protocol IDs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="auto internal xref">10.4</a>.Â Â <a href="#name-service-parameter-key-svcpa" class="internal xref">Service Parameter Key (SvcParamKey)</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.5">
                <p id="section-toc.1-1.10.2.5.1"><a href="#section-10.5" class="auto internal xref">10.5</a>.Â Â <a href="#name-underscored-and-globally-sc" class="internal xref">Underscored and Globally Scoped DNS Node Names</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>.Â <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.Â Â <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.Â Â <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.Â Â <a href="#name-change-log" class="internal xref">Change log</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.Â Â <a href="#name-related-work-and-applicabil" class="internal xref">Related work and applicability to related fields</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.Â Â <a href="#name-on-http" class="internal xref">On HTTP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.Â Â <a href="#name-using-dns" class="internal xref">Using DNS</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#appendix-B.3" class="auto internal xref">B.3</a>.Â Â <a href="#name-using-names-outside-regular" class="internal xref">Using names outside regular DNS</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.4">
                <p id="section-toc.1-1.13.2.4.1"><a href="#appendix-B.4" class="auto internal xref">B.4</a>.Â Â <a href="#name-multipath-tcp" class="internal xref">Multipath TCP</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.Â Â <a href="#name-open-questions-further-idea" class="internal xref">Open Questions / further ideas</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.Â Â <a href="#name-edhoc-ead-for-verifying-leg" class="internal xref">EDHOC EAD for verifying legitimate proxies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-E" class="auto internal xref">Appendix E</a>.Â Â <a href="#name-literals-beyond-ip-addresse" class="internal xref">Literals beyond IP addresses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#appendix-E.1" class="auto internal xref">E.1</a>.Â Â <a href="#name-motivation-for-new-literal-" class="internal xref">Motivation for new literal-ish names</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#appendix-E.2" class="auto internal xref">E.2</a>.Â Â <a href="#name-structure-of-servicearpa" class="internal xref">Structure of <code>service.arpa</code></a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.3">
                <p id="section-toc.1-1.16.2.3.1"><a href="#appendix-E.3" class="auto internal xref">E.3</a>.Â Â <a href="#name-processing-servicearpa" class="internal xref">Processing <code>service.arpa</code></a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.4">
                <p id="section-toc.1-1.16.2.4.1"><a href="#appendix-E.4" class="auto internal xref">E.4</a>.Â Â <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-F" class="auto internal xref">Appendix F</a>.Â Â <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-G" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The Constrained Application Protocol (CoAP) provides multiple transports mechanisms:
UDP and DTLS since <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>, and TCP, TLS and WebSockets since <span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span>.
Some additional transports being used in LwM2M <span>[<a href="#lwm2m" class="cite xref">lwm2m</a>]</span>,
and even more being explored (<span>[<a href="#I-D.bormann-t2trg-slipmux" class="cite xref">I-D.bormann-t2trg-slipmux</a>]</span>, <span>[<a href="#I-D.amsuess-core-coap-over-gatt" class="cite xref">I-D.amsuess-core-coap-over-gatt</a>]</span>).
These are mutually incompatible on the wire,
but CoAP implementations commonly support several of them,
and proxies can translate between them.<a href="#section-1-1" class="pilcrow">Â¶</a></p>
<p id="section-1-2">CoAP currently lacks a way to indicate which transports are available for a given resource,
and which endpoints are available for them.
This document introduces ways to discover
and how to use them.<a href="#section-1-2" class="pilcrow">Â¶</a></p>
<p id="section-1-3">CoAP also lacks a unified scheme to label a resource in a transport-independent way.
This document does <em>not</em> attempt to introduce any new scheme here,
or raise a scheme to be the canonical one.
Instead, each host or application can pick a canonical address for its resources,
and advertise other transports in addition.<a href="#section-1-3" class="pilcrow">Â¶</a></p>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">Readers are expected to be familiar with the terms and concepts
described in CoAP <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>.
For web link based discovery,
terminology introduced for link format <span>[<a href="#RFC6690" class="cite xref">RFC6690</a>]</span> is used
(or, equivalently, web links as described in <span>[<a href="#RFC8288" class="cite xref">RFC8288</a>]</span>);
for DNS based discovery,
<span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> provides the relevant definitions.<a href="#section-1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-1.1-2">The phrase "the transport indicated by (a URI)" is used as described in <a href="#identifying" class="auto internal xref">Section 1.5.1</a>.<a href="#section-1.1-2" class="pilcrow">Â¶</a></p>
<p id="section-1.1-3">A protocol that implements CoAP request-response semantics for a lower layer
is called a "(CoAP) transport".<a href="#section-1.1-3" class="pilcrow">Â¶</a></p>
<p id="section-1.1-4">When the term "endpoint" is used in this document,
it is generalized from the <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span> definition
to mean the transport and any multiplexing information particular to that transport.<a href="#section-1.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="goals">
<section id="section-1.2">
        <h3 id="name-goals">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-goals" class="section-name selfRef">Goals</a>
        </h3>
<p id="section-1.2-1">This document introduces provisions for the seamless use of different transport mechanisms for CoAP.
Combined, these provide:<a href="#section-1.2-1" class="pilcrow">Â¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1.2-2">
<li id="section-1.2-2.1">
            <p id="section-1.2-2.1.1">Enablement: Inform clients of the availability of other transports of servers.<a href="#section-1.2-2.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-1.2-2.2">
            <p id="section-1.2-2.2.1">No Aliasing: Any URI aliasing must be opt-in by the server. Any defined mechanisms must allow applications to keep working on the canonical URIs given by the server.<a href="#section-1.2-2.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-1.2-2.3">
            <p id="section-1.2-2.3.1">Optimization: Do not incur per-request overhead from switching transports. This may depend on the server's willingness to create aliased URIs.<a href="#section-1.2-2.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-1.2-2.4">
            <p id="section-1.2-2.4.1">Proxy usability: All information provided must be usable by aware proxies to reduce the need for duplicate cache entries.<a href="#section-1.2-2.4.1" class="pilcrow">Â¶</a></p>
</li>
          <li id="section-1.2-2.5">
            <p id="section-1.2-2.5.1">Proxy announcement: Allow third parties to announce that they provide alternative transports to a host.<a href="#section-1.2-2.5.1" class="pilcrow">Â¶</a></p>
</li>
        </ol>
<p id="section-1.2-3">For all these functions, security policies must be described that allow the client to use them as securely as the original transport.<a href="#section-1.2-3" class="pilcrow">Â¶</a></p>
<p id="section-1.2-4">This document will not concern itself with changes in transport availability over time,
neither in causing them ("Please take up your TCP interface, I'm going to send a firmware update")
nor in advertising their availability in advance.
Hosts whose transport's availability changes over time can utilize
any suitable mechanism to keep client updated,
such as placing a suitable Max-Age value on their resources
or having them observable.<a href="#section-1.2-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="endpoints-are-proxies">
<section id="section-1.3">
        <h3 id="name-core-principle-transport-en">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-core-principle-transport-en" class="section-name selfRef">Core principle: Transport endpoints are proxies</a>
        </h3>
<p id="section-1.3-1">CoAP does not need any special provisions to send the same request for a single resource through different transports:
A request to any globally addressable resource
can be sent to any endpoint
by phrasing it as a proxy request.<a href="#section-1.3-1" class="pilcrow">Â¶</a></p>
<p id="section-1.3-2">Whether that endpoint is
trusted to,
capable of
and willing to
relay that request,
and how to find suitable endpoints
to serve as a proxy for a request
is discussed in this document.<a href="#section-1.3-2" class="pilcrow">Â¶</a></p>
<p id="section-1.3-3">When resource identifiers have different meanings depending on the host.
the applicability of this document is limited.
<span class="cref" id="applicabilitylimited">Possibly not limited a lot, but we have not looked into those cases in detail yet. --CA</span>
Examples of such resources are those whose URIs including loopback addresses or partially-qualified domain names.<a href="#section-1.3-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="registered-names-and-transport-setup">
<section id="section-1.4">
        <h3 id="name-registered-names-and-transp">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-registered-names-and-transp" class="section-name selfRef">Registered names and transport setup</a>
        </h3>
<p id="section-1.4-1">The CoAP specification is intentionally open about the resolution services
by which indirect identifiers in the host portion of a CoAP URI are resolved,
giving DNS as one example without going into details (<span><a href="https://rfc-editor.org/rfc/rfc7252#section-6.1" class="relref">Section 6.1</a> of [<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>).<a href="#section-1.4-1" class="pilcrow">Â¶</a></p>
<p id="section-1.4-2">This document does not change any of that,
but it does point out in <a href="#findendpoint" class="auto internal xref">Section 2</a> the breadth of information that such a service can provide
(e.g. providing multiple addresses, or metadata on services used on them),
and gives a concrete example of the information that modern DNS idioms deliver
(which it enables by performing a registration in <a href="#iana-underscored" class="auto internal xref">Section 10.5</a>).<a href="#section-1.4-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="concepts">
<section id="section-1.5">
        <h3 id="name-concepts">
<a href="#section-1.5" class="section-number selfRef">1.5. </a><a href="#name-concepts" class="section-name selfRef">Concepts</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.5-1">
          <dt id="section-1.5-1.1">Same-host proxy:</dt>
          <dd style="margin-left: 1.5em" id="section-1.5-1.2">
            <p id="section-1.5-1.2.1">A CoAP server that accepts forward proxy requests (i.e., requests carrying the Proxy-Scheme option)
exclusively for URIs that it is also the authoritative server for is defined as a "same-host proxy".<a href="#section-1.5-1.2.1" class="pilcrow">Â¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-1.5-1.3"></dt>
          <dd style="margin-left: 1.5em" id="section-1.5-1.4">
            <p id="section-1.5-1.4.1">The distinction between a same-host and any other proxy is only relevant on a practical, server-implementation and illustrative level;
this specification does not use the distinction in normative requirements,
and clients need not make the distinction at all.<a href="#section-1.5-1.4.1" class="pilcrow">Â¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-1.5-2">When talking of proxy requests,
this document only talks of the Proxy-Scheme option.
Given that all URIs this is usable with can be expressed in decomposed CoAP URIs,
the need for using the Proxy-URI option should never arise.
The Proxy-URI option is still equivalent to the decomposed options,
and can be used if the server supports it.<a href="#section-1.5-2" class="pilcrow">Â¶</a></p>
<div id="identifying">
<section id="section-1.5.1">
          <h4 id="name-using-uris-to-identify-tran">
<a href="#section-1.5.1" class="section-number selfRef">1.5.1. </a><a href="#name-using-uris-to-identify-tran" class="section-name selfRef">Using URIs to identify transport endpoints</a>
          </h4>
<p id="section-1.5.1-1">The URI <code>coap://[2001:db8::1]</code> identifies a particular resource, possibly a "welcome" text.
It is, colloquially, also used to identify the combination
of a CoAP transport and the transport specific details.<a href="#section-1.5.1-1" class="pilcrow">Â¶</a></p>
<p id="section-1.5.1-2">For precision, this document uses the term
"the transport address indicated by (a URI)" to refer to the transport and its details,
but otherwise no big deal is made of it.<a href="#section-1.5.1-2" class="pilcrow">Â¶</a></p>
<p id="section-1.5.1-3">Note that as such a URI may contain a registered name:
as with any CoAP URI, resolution services apply.
Therefore, it may indicate multiple transport endpoints.<a href="#section-1.5.1-3" class="pilcrow">Â¶</a></p>
<p id="section-1.5.1-4">[ TBD: Do we want to extend this to HTTP proxies? Probably just not, and if so, only to those that can just take coap://... for a URI. ]<a href="#section-1.5.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="findendpoint">
<section id="section-2">
      <h2 id="name-finding-suitable-endpoints-">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-finding-suitable-endpoints-" class="section-name selfRef">Finding suitable endpoints for a URI</a>
      </h2>
<p id="section-2-1">When a CoAP request is created by a client,
a typical starting point is the URI of the request's target resource.
To send the request,
a suitable endpoint needs to be discovered.
This section lists the ways one or more such endpoints can be found.<a href="#section-2-1" class="pilcrow">Â¶</a></p>
<p id="section-2-2">In some situations,
a client decides to use a forward proxy to access the resource:
either because it is explicitly configured to do so (<a href="#actualproxies" class="auto internal xref">Section 6</a>),
or because it has discovered a preferred proxy (<a href="#hasproxy" class="auto internal xref">Section 2.2</a>).
In that case, it
finds the endpoint of the configured proxy (using <a href="#processing-scheme-authority" class="auto internal xref">Section 2.1</a>, if not given explicitly).
The proxy then decides on an endpoint to which to forward the request for its own,
(again using the tools described in this section).
Otherwise, it uses the information of scheme and authority,
often through a resolution service (<a href="#processing-scheme-authority" class="auto internal xref">Section 2.1</a>).<a href="#section-2-2" class="pilcrow">Â¶</a></p>
<p id="section-2-3">No matter how the endpoint (and thus transport) was discovered and whether a proxy is involved,
it does not alter the URI of the resource being requested.
The Proxy-Scheme, Uri-Host and Uri-Port options are set as needed
to ensure that the request keeps targeting the requested resource.
This happens, respectively,
if the URI scheme associated with the selected transport differs from the request URI's scheme
(or a proxy is used),
when the host name is not the default one for the transport
(e.g. if it is not an IP literal in the UDP or TCP cases, or a proxy is used;
DNS CNAME entries or SVCB target do not alter the URI's host name at all)
or a different port is used (as possible through SVCB).
(Outside proxy cases,
<span><a href="https://rfc-editor.org/rfc/rfc7252#section-6.4" class="relref">Section 6.4</a> of [<a href="#RFC7252" class="cite xref">RFC7252</a>]</span> only talks of setting the Uri-Host to preserve the URI, and not of setting Proxy-Scheme or Uri-Port.
That is because at the time of writing, no mechanisms were available to select a different transport or port).<a href="#section-2-3" class="pilcrow">Â¶</a></p>
<p id="section-2-4">Note that there is no meaningful difference in a client's behavior between
when it is configured with a proxy,
has discovered a proxy through links
or has discovered a completely different transport:
this is the essence of "transport endpoints are proxies" <a href="#endpoints-are-proxies" class="auto internal xref">Section 1.3</a>.<a href="#section-2-4" class="pilcrow">Â¶</a></p>
<p id="section-2-5"><span class="cref" id="moveme">The following two paragraphs may need a new home eventually to keep this section to the point. --CA</span><a href="#section-2-5" class="pilcrow">Â¶</a></p>
<p id="section-2-6">For servers that follow the common pattern of exposing the same resources on all transports (and thus having multiple aliased URIs for the same resource)
and that do not act as proxies for other systems,
the presence of the Proxy-Scheme option introduced by using alternative transports has little practical consequence:
such servers become same-host proxies,
and can ignore the Proxy-Scheme option as long as they recognize the Uri-Host value
(which they already have been required to process).<a href="#section-2-6" class="pilcrow">Â¶</a></p>
<p id="section-2-7">While a server is at liberty to create aliases,
clients can not infer from the presence of a transport for a host
that URIs created from addressing that transport are present.
For example, if <code>coap://h.example.net/sensors/temp</code> is a known resource,
and CoAP-over-TCP on [2001:db8::1] is indicated as a transport endpoint,
there is no reason for the client to assume that <code>coap+tcp://[2001:db8::1]/sensors/temp</code> exists,
let alone is the same resource:
Clients that access the known resource by establishing a TCP connection
need to send the options Proxy-Scheme value "coap", the Uri-Host value "h.example.net"
and the Uri-Path values "sensors" and "temp".<a href="#section-2-7" class="pilcrow">Â¶</a></p>
<div id="processing-scheme-authority">
<section id="section-2.1">
        <h3 id="name-processing-scheme-and-autho">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-processing-scheme-and-autho" class="section-name selfRef">Processing scheme and authority</a>
        </h3>
<p id="section-2.1-1">To discover endpoints for a given URI,
the scheme and the authority component of the URI
are typical starting points for resolution services.<a href="#section-2.1-1" class="pilcrow">Â¶</a></p>
<p id="section-2.1-2">The outcome of any resolution service is a list of transport candidates.
It may be partially sorted, and may arrive piece by piece.<a href="#section-2.1-2" class="pilcrow">Â¶</a></p>
<p id="section-2.1-3">In addition to the list of transport candidates,
a resolution service may also provide general metadata of the endpoint
(e.g. necessary or sufficient requirements on the endpoint's credentials,
such as they are present in TLSA records).<a href="#section-2.1-3" class="pilcrow">Â¶</a></p>
<p id="section-2.1-4">Conceptually, each entry contains:<a href="#section-2.1-4" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-5.1">
            <p id="section-2.1-5.1.1">Which CoAP transport is used (e.g. CoAP-over-TCP; typically expressed as an ALPN).<a href="#section-2.1-5.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-2.1-5.2">
            <p id="section-2.1-5.2.1">The transport's address details (e.g. an IP address and port number).<a href="#section-2.1-5.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-2.1-5.3">
            <p id="section-2.1-5.3.1">Any additional metadata that facilitates communication (e.g. public keys for <span>[<a href="#I-D.ietf-tls-esni" class="cite xref">I-D.ietf-tls-esni</a>]</span>).<a href="#section-2.1-5.3.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-2.1-6">While it is generally preferable for the lookup result to be complete, it might manage only partial information.
From that partial information,
further resolution may be performed,
or the information may already suffice to send a request based on other known proxy information.<a href="#section-2.1-6" class="pilcrow">Â¶</a></p>
<p id="section-2.1-7">Resolution services may have more structure in that list,
may provide multiple choices in a single result
or may branch out in multiple layers.
At a conceptual level, those are reduced to an expanded list of individual candidates.<a href="#section-2.1-7" class="pilcrow">Â¶</a></p>
<div id="transport-unaware-resolution">
<section id="section-2.1.1">
          <h4 id="name-transport-unaware-resolutio">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-transport-unaware-resolutio" class="section-name selfRef">Transport-unaware resolution</a>
          </h4>
<p id="section-2.1.1-1">The IP based transports specified so far (CoAP over UDP, DTLS, TCP, TLS and WebSockets)
all indicate the transport in their scheme,
and either use their default port or indicate the port explicitly.
The only remaining details of multiplexing information required are the IP version(s) and IP address(es) of the server.<a href="#section-2.1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-2.1.1-2">If the host component of the URI is a literal,
that information is already available.<a href="#section-2.1.1-2" class="pilcrow">Â¶</a></p>
<p id="section-2.1.1-3">If the host component of the URI is a registered name,
a name resolution service is used for a simple name lookup:
When DNS is used as a resolution service,
AAAA (or A) records of the name are looked up.
The /etc/hosts file and nsswitch "host" database can provide that same information.<a href="#section-2.1.1-3" class="pilcrow">Â¶</a></p>
<p id="section-2.1.1-4">Additional metadata provided by this resolution service
are the zone identifier (implied in DNS by using the zone the DNS response was obtained through)
or additional records (such as khe aforementionened TLSA records).<a href="#section-2.1.1-4" class="pilcrow">Â¶</a></p>
<p id="section-2.1.1-5">Simple resolution services do not indicate which transports are available on the address.
Servers reached that way can resort to <a href="#hasproxy" class="auto internal xref">Section 2.2</a> to indicate alternative transports while exchanging initial data through the original transport,
or to store information in link format / web-link based information systems (such as a Resource Directory <span>[<a href="#RFC9176" class="cite xref">RFC9176</a>]</span>).<a href="#section-2.1.1-5" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="transport-aware-resolution-mechanisms">
<section id="section-2.1.2">
          <h4 id="name-transport-aware-resolution-">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-transport-aware-resolution-" class="section-name selfRef">Transport-aware resolution mechanisms</a>
          </h4>
<p id="section-2.1.2-1">Advanced resolution services
provide information about which transports are available in addition to those of the previous section.<a href="#section-2.1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-2.1.2-2">For the DNS resolution mechanism, SVCB lookups described in <a href="#svcb-discovery" class="auto internal xref">Section 7.1</a>
provide that information.<a href="#section-2.1.2-2" class="pilcrow">Â¶</a></p>
<p id="section-2.1.2-3">It is recommended
that future transports are designed to utilize transport-aware resolution mechanisms; see <a href="#upcomingtransports" class="auto internal xref">Section 8</a> for details.<a href="#section-2.1.2-3" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="hasproxy">
<section id="section-2.2">
        <h3 id="name-explicit-proxy-indication">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-explicit-proxy-indication" class="section-name selfRef">Explicit proxy indication</a>
        </h3>
<p id="section-2.2-1">A server can advertise a recommended proxy
by publishing a Web Link with the "has-proxy" relation, defined in this document, to a URI indicating its transport address.
In particular (and that is a typical case),
it can indicate its own network address on an alternative transport when implementing same-host proxy functionality.<a href="#section-2.2-1" class="pilcrow">Â¶</a></p>
<p id="section-2.2-2">The semantics of a link from S to P with relations has-proxy ("S has-proxy P", <code>&lt;P&gt;;rel=has-proxy;anchor="S"</code>)
are that for any resource that has the same origin as S, the transport address indicated by P can be used to obtain that resource.<a href="#section-2.2-2" class="pilcrow">Â¶</a></p>
<div id="example">
<section id="section-2.2.1">
          <h4 id="name-example">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-2.2.1-1">A constrained device at the address 2001:db8::1 that supports CoAP over TCP in addition to CoAP can self-describe like this:<a href="#section-2.2.1-1" class="pilcrow">Â¶</a></p>
<span id="name-discovery-and-follow-up-req"></span><div id="fig-has-proxy">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-2.2.1-2.1">
<pre>
Req: to [ff02::fd]:5683 on UDP
Code: GET
Uri-Path: /.well-known/core
Uri-Query: if=tag:example.com,sensor

Res: from [2001:db8::1]:5683
Content-Format: application/link-format
Payload:
&lt;/sensors/temp&gt;;if="tag:example.com,sensor",
&lt;coap+tcp://[2001:db8::1]&gt;;rel=has-proxy;anchor="/"


Req: to [2001:db8::1]:5683 on TCP
Code: GET
Proxy-Scheme: coap
Uri-Path: /sensors/temp
Observe: 0

Res: 2.05 Content
Observe: 0
Payload:
39.1Â°C
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-discovery-and-follow-up-req" class="selfRef">Discovery and follow-up request through a has-proxy relation</a>
            </figcaption></figure>
</div>
<p id="section-2.2.1-3">The discovery process yields two links:
The first describes the resource,
the second describes that an additional (TCP) endpoint is available for all resources on this host.<a href="#section-2.2.1-3" class="pilcrow">Â¶</a></p>
<p id="section-2.2.1-4">Note that generating this discovery file needs to be dynamic based on its available addresses;
only if queried using a link-local source address, the server may also respond with a link-local address in the authority component of the proxy URI.<a href="#section-2.2.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="operational-concerns-of-discovered-transport-endpoints">
<section id="section-3">
      <h2 id="name-operational-concerns-of-dis">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-operational-concerns-of-dis" class="section-name selfRef">Operational concerns of discovered transport endpoints</a>
      </h2>
<div id="secctx-propagation">
<section id="section-3.1">
        <h3 id="name-security-context-propagatio">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-security-context-propagatio" class="section-name selfRef">Security context propagation</a>
        </h3>
<p id="section-3.1-1">Any security requirements posed by a server or client application on a CoAP request
MUST be applied independently of the transport that is used to perform the request.
If a transport can not be used to satisfy the requirements,
it is ineligible for use with the request (from a client's point of view),
and unauthorized (from a server's point of view).<a href="#section-3.1-1" class="pilcrow">Â¶</a></p>
<p id="section-3.1-2">If the requirements contain transport layer security,
the proxy needs to present the credentials required of the server to the client,
and those of the client to the server;
this is only practical when the proxy is a same-host proxy.<a href="#section-3.1-2" class="pilcrow">Â¶</a></p>
<p id="section-3.1-3">Some applications have requirements
exceeding the requirements of a secure connection,
e.g., (explicitly or implicitly) requiring that
name resolution happen through a secure process
and packets are only routed into networks where it trusts that they will not be intercepted on the path to the server.
Such applications need to extend their requirements to the the sources used to obtain the endpoints
(i.e., the source of any <code>has-proxy</code> statement or the SVCB data);
a sufficient (but maybe needlessly strict) requirement for <code>has-proxy</code> statements is to only follow those
that are part of the same resource that advertises the link currently being followed.
Section <a href="#proxy-foreign-advertisement" class="auto internal xref">Section 9.2</a> adds further considerations.<a href="#section-3.1-3" class="pilcrow">Â¶</a></p>
<div id="exception-narrowing-security-requirements">
<section id="section-3.1.1">
          <h4 id="name-exception-narrowing-securit">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-exception-narrowing-securit" class="section-name selfRef">Exception: Narrowing security requirements</a>
          </h4>
<p id="section-3.1.1-1">If a concrete application starts with a minimal set of security requirements,
has no means of discovering security properties of the endpoint
and can only discovery security properties of a transport,
it MAY describe how a first step of transport discovery narrows the security requirements.<a href="#section-3.1.1-1" class="pilcrow">Â¶</a></p>
<p id="section-3.1.1-2">An example of this is <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-16#section-3.2" class="relref">Section 3.2</a> of [<a href="#I-D.ietf-core-dns-over-coap" class="cite xref">I-D.ietf-core-dns-over-coap</a>]</span>
where the target name of the SVCB record is used to set the hostname component of a URI and thus set security requirements.<a href="#section-3.1.1-2" class="pilcrow">Â¶</a></p>
<p id="section-3.1.1-3">Before making use of this option,
alternatives such as using TLSA records should be exhausted.<a href="#section-3.1.1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="choice-of-endpoints">
<section id="section-3.2">
        <h3 id="name-choice-of-endpoints">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-choice-of-endpoints" class="section-name selfRef">Choice of endpoints</a>
        </h3>
<p id="section-3.2-1">It is up to the client whether to use an advertised endpoint,
or (if multiple are provided) which to pick.<a href="#section-3.2-1" class="pilcrow">Â¶</a></p>
<p id="section-3.2-2">Information about endpoints may be annotated with additional metadata that may help guide such a choice;
defining such metadata is out of scope for this document.<a href="#section-3.2-2" class="pilcrow">Â¶</a></p>
<p id="section-3.2-3">Clients MAY switch between endpoints as long as the source describing them is fresh;
they may even do so per request.
(For example, they may perform individual requests using CoAP-over-UDP,
but choose CoAP-over-TCP for requests with large expected responses).
When the information about endpoints is obtained through CoAP (e.g. as a <code>has-proxy</code> link),
the client can use the describing representation's ETag to efficiently renew its justification for using the alternative transport.<a href="#section-3.2-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="selection-of-a-canonical-origin">
<section id="section-3.3">
        <h3 id="name-selection-of-a-canonical-or">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-selection-of-a-canonical-or" class="section-name selfRef">Selection of a canonical origin</a>
        </h3>
<p id="section-3.3-1">While a server is at liberty to provide the same resource independently on different transports (i.e. to create aliases),
it may make sense for it to pick a single scheme and authority under which it announces its resources.
Using only one address helps proxies keep their caches efficient,
and makes it easier for clients to avoid exploring the same server twice from different angles.<a href="#section-3.3-1" class="pilcrow">Â¶</a></p>
<p id="section-3.3-2">When there is a predominant scheme and authority through which an existing service is discovered,
it makes sense to use these for the canonical addresses.<a href="#section-3.3-2" class="pilcrow">Â¶</a></p>
<p id="section-3.3-3">Otherwise,
it is suggested to use the <code>coap</code> or <code>coaps</code> scheme
(given that these are the most basic and widespread ones),
and the most stable usable name the host has.<a href="#section-3.3-3" class="pilcrow">Â¶</a></p>
<div id="unreachable-canonical-origin-addresses">
<section id="section-3.3.1">
          <h4 id="name-unreachable-canonical-origi">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-unreachable-canonical-origi" class="section-name selfRef">Unreachable canonical origin addresses</a>
          </h4>
<p id="section-3.3.1-1">For devices that are not generally reachable at a stable address,
it may make sense to use a scheme and authority as the canonical address that can not actually be dereferenced.<a href="#section-3.3.1-1" class="pilcrow">Â¶</a></p>
<p id="section-3.3.1-2">The registered names available for that purpose depend on the resolution mechanisms in use.
When the Domain Name System (DNS) is used,
such names would not be associated with any A or AAAA records
(but may still use, for example, TLSA records).<a href="#section-3.3.1-2" class="pilcrow">Â¶</a></p>
<p id="section-3.3.1-3">Such URIs are <em>only</em> usable to clients that discover a suitable proxy along with the URI,
and which can place sufficient trust in that proxy.<a href="#section-3.3.1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="advertisement-through-a-resource-directory">
<section id="section-3.4">
        <h3 id="name-advertisement-through-a-res">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-advertisement-through-a-res" class="section-name selfRef">Advertisement through a Resource Directory</a>
        </h3>
<p id="section-3.4-1">In the Resource Directory specification <span>[<a href="#rfc9176" class="cite xref">rfc9176</a>]</span>,
protocol negotiation was anticipated to use multiple base values.
This approach was abandoned since then,
as it would incur heavy URI aliasing.<a href="#section-3.4-1" class="pilcrow">Â¶</a></p>
<p id="section-3.4-2">Instead, devices can submit their has-proxy links to the Resource Directory like all their other metadata.<a href="#section-3.4-2" class="pilcrow">Â¶</a></p>
<p id="section-3.4-3">A client performing resource lookup can ask the RD to provide available (same-host-)proxies in a follow-up request
by asking for <code>?anchor=&lt;the-discovered-host&gt;&amp;rel=has-proxy</code>.

The RD may also volunteer that information during resource lookups even though the has-proxy link itself does not match the search criteria.<a href="#section-3.4-3" class="pilcrow">Â¶</a></p>
<p id="section-3.4-4">[<a href="#section-3.4-4" class="pilcrow">Â¶</a></p>
<p id="section-3.4-5">It may be useful to define RD parameters for use with lookup here, which'd guide which available proxies to include.
For example, asking <code>?if=tag:example.com,sensor&amp;proxy-links=tcp</code> could give as a result:<a href="#section-3.4-5" class="pilcrow">Â¶</a></p>
<p id="section-3.4-6"><code>&lt;coap://[2001:db8::1]/s&gt;;rt=tag:example.com,sensor,&lt;coap+tcp://[2001:db8::1]/&gt;;rel=has-proxy;anchor="coap://[2001:db8::1]/"</code><a href="#section-3.4-6" class="pilcrow">Â¶</a></p>
<p id="section-3.4-7">This is similar to the extension suggested in <span><a href="https://datatracker.ietf.org/doc/html/draft-amsuess-core-resource-directory-extensions-11#section-5" class="relref">Section 5</a> of [<a href="#I-D.amsuess-core-resource-directory-extensions" class="cite xref">I-D.amsuess-core-resource-directory-extensions</a>]</span>.<a href="#section-3.4-7" class="pilcrow">Â¶</a></p>
<p id="section-3.4-8">]<a href="#section-3.4-8" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="elision-of-proxy-scheme-and-uri-host">
<section id="section-4">
      <h2 id="name-elision-of-proxy-scheme-and">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-elision-of-proxy-scheme-and" class="section-name selfRef">Elision of Proxy-Scheme and Uri-Host</a>
      </h2>
<p id="section-4-1">A CoAP server may publish and accept multiple URIs for the same resource,
for example when it accepts requests on different IP addresses that do not carry a Uri-Host option,
or when it accepts requests both with and without the Uri-Host option carrying a registered name.
Likewise, the server may serve the same resources on different transports.
This makes for efficient requests (with no Proxy-Scheme or Uri-Host option),
but in general is discouraged <span>[<a href="#aliases" class="cite xref">aliases</a>]</span>.<a href="#section-4-1" class="pilcrow">Â¶</a></p>
<p id="section-4-2">To make efficient requests possible without creating URI aliases that propagate,
the "has-unique-proxy" specialization of the has-proxy relation
and the "is-unique-proxy" SVCB parameter are defined.<a href="#section-4-2" class="pilcrow">Â¶</a></p>
<p id="section-4-3">If a proxy is unique,
it means that requests arriving at the proxy are treated the same
no matter whether the scheme, authority and port of the link context are set in the Proxy-Scheme, Uri-Host and Uri-Port options, respectively,
or whether all of them are absent.<a href="#section-4-3" class="pilcrow">Â¶</a></p>
<p id="section-4-4">[ The following two paragraphs are both true but follow different approaches to explaining the observable and implementable behavior;
   it may later be decided to focus on one or the other in this document. ]<a href="#section-4-4" class="pilcrow">Â¶</a></p>
<p id="section-4-5">While this creates URI aliasing in the requests as they are sent over the network,
applications that discover a proxy this way should not "think" in terms of these URIs,
but retain the originally discovered URIs (which, because Cool URIs Don't Change<span>[<a href="#cooluris" class="cite xref">cooluris</a>]</span>, should be long-term usable).
They use the proxy for as long as they have fresh knowledge of the has-(unique-)proxy statement.<a href="#section-4-5" class="pilcrow">Â¶</a></p>
<p id="section-4-6">In a way, advertising <code>has-unique-proxy</code> can be viewed as a description of the link target in terms of SCHC <span>[<a href="#I-D.ietf-lpwan-coap-static-context-hc" class="cite xref">I-D.ietf-lpwan-coap-static-context-hc</a>]</span>:
In requests to that target, the link source's scheme and host are implicitly present.<a href="#section-4-6" class="pilcrow">Â¶</a></p>
<p id="section-4-7">While applications retain knowledge of the originally requested URI
(even if it is not expressed in full on the wire),
the original URI is not accessible to caches both within the host and on the network
(for the latter, see <a href="#actualproxies" class="auto internal xref">Section 6</a>).
Thus, cached responses to the canonical and any aliased URI are mutually interchangeable
as long as both the response and the proxy statement are fresh.<a href="#section-4-7" class="pilcrow">Â¶</a></p>
<p id="section-4-8">A client MAY use a unique-proxy like a proxy and still send the Proxy-Scheme and Uri-Host option;
such a client needs to recognize both relation types, as relations of the has-unique-proxy type
are a specialization of has-proxy and typically don't carry the latter (redundant) annotation.
[ To be evaluated -- on one hand, supporting it this way means that the server needs to identify all of its addresses and reject others.
   Then again, is a server that (like many now do) fully ignore any set Uri-Host correct at all? ]<a href="#section-4-8" class="pilcrow">Â¶</a></p>
<p id="section-4-9">Example:<a href="#section-4-9" class="pilcrow">Â¶</a></p>
<span id="name-follow-up-request-through-a"></span><div id="fig-has-unique-proxy">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-4-10.1">
<pre>
Req: to [ff02::fd]:5683 on UDP
Code: GET
Uri-Path: /.well-known/core
Uri-Query: if=tag:example.com,sensor

Res: from [2001:db8::1]:5683
Content-Format: application/link-format
Payload:
&lt;/sensors/&gt;;if="tag:example.com,collection",
&lt;coaps+ws://[2001:db8::1]&gt;;rel=has-unique-proxy;anchor="/"


Req: to [2001:db8::1] via WebSockets over HTTPS
Code: GET
Uri-Path: /sensors/

Res: 2.05 Content
Content-Format: application/link-format
Payload:
&lt;/sensors/temperature&gt;;if="tag:example.com,sensor"
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-follow-up-request-through-a" class="selfRef">Follow-up request through a has-unique-proxy relation. Compared to the last example, 5 bytes of scheme indication are saved during the follow-up request.</a>
        </figcaption></figure>
</div>
<p id="section-4-11">It is noteworthy that when the URI reference <code>/sensors/temperature</code> is resolved,
the base URI is <code>coap://device0815.example.com</code> and not its coaps+ws counterpart --
as the request is still for that URI, which both the client and the server are aware of.
However, this detail is of little practical importance:
A simplistic client that uses <code>coaps+ws://device0815.proxy.rd.example.com</code> as a base URI will still arrive at an identical follow-up request with no ill effect,
as long as it only uses the wrongly assembled URI for dereferencing resources,
the security context is the same,
the state is kept no longer than the has-unique-proxy statement is fresh,
and it does not (for example) pass the URI on to other devices.<a href="#section-4-11" class="pilcrow">Â¶</a></p>
<div id="impact-on-caches">
<section id="section-4.1">
        <h3 id="name-impact-on-caches">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-impact-on-caches" class="section-name selfRef">Impact on caches</a>
        </h3>
<p id="section-4.1-1">[ This section is written with the "there is implied URI aliasing" mindset;
it should be possible to write it with the "compression" mindset as well
(but there is no point in having both around in the document at this time).<a href="#section-4.1-1" class="pilcrow">Â¶</a></p>
<p id="section-4.1-2">It is also slightly duplicating, but also more detailed than,
the brief note on the topic in <a href="#actualproxies" class="auto internal xref">Section 6</a>
]<a href="#section-4.1-2" class="pilcrow">Â¶</a></p>
<p id="section-4.1-3">When a node that performs caching learns of a <code>has-unique-proxy</code> statement,
it can utilize the information about the implied URI aliasing:
As long as the <code>has-unique-proxy</code> statement is fresh and trusted,
requests for either of the origins can be served from the cache of the other origin.<a href="#section-4.1-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="unique-security">
<section id="section-4.2">
        <h3 id="name-using-unique-proxies-secure">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-using-unique-proxies-secure" class="section-name selfRef">Using unique proxies securely</a>
        </h3>
<p id="section-4.2-1">The elision of the host name afforded by the <code>unique-proxy</code> relation
is only possible if the required security mechanisms verify the scheme and host of the server.<a href="#section-4.2-1" class="pilcrow">Â¶</a></p>
<p id="section-4.2-2">This is given for OSCORE based mechanisms,
where "unprotected message fields (including Uri-Host [...]) MUST not lead to an OSCORE message becoming verified".<a href="#section-4.2-2" class="pilcrow">Â¶</a></p>
<p id="section-4.2-3">With TLS based security mechanisms,
name and scheme can not be completely elided in general.
While the use of the SNI HostName field sets the default Uri-Host already,
the scheme still needs to be sent in a Proxy-Scheme option
to satisfy the requirement of <a href="#secctx-propagation" class="auto internal xref">Section 3.1</a>.<a href="#section-4.2-3" class="pilcrow">Â¶</a></p>
<p id="section-4.2-4">[
It may be possible to relax this requirement
if the host publishes a <em>trustworthy</em> statement about serving the same content on all schemes;
however, no urgent need for this optimization is currently known that warrants the extra scrutiny.
]<a href="#section-4.2-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="self-description-as-a-unique-proxy">
<section id="section-4.3">
        <h3 id="name-self-description-as-a-uniqu">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-self-description-as-a-uniqu" class="section-name selfRef">Self-description as a unique proxy</a>
        </h3>
<p id="section-4.3-1">The level of assurance a client needs from a server
to elide the Uri-Host option in a request that was created from a URI with no IP address literal
has been a controversial topic.
[ Should we dig up old conversations, link to https://github.com/core-wg/wiki/wiki/CoAP-FAQ#q4,
or just let the weight of a WG consensus-document-to-be do its work? ]<a href="#section-4.3-1" class="pilcrow">Â¶</a></p>
<p id="section-4.3-2">The <code>has-unique-proxy</code> relation provides an easy way for a server
to indicate that this is in fact allowed:
A server can publish a statement such as <code>&lt;/&gt;;rel=has-unique-proxy</code> in its <code>/.well-known/core</code> file.
A client that receives and understands it can thus elide the Uri-Host option in requests to the server
as per the definition of the relation.<a href="#section-4.3-2" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="thirdparty">
<section id="section-5">
      <h2 id="name-third-party-proxy-services">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-third-party-proxy-services" class="section-name selfRef">Third party proxy services</a>
      </h2>
<p id="section-5-1">A server that is aware of a suitable cross proxy may use the has-proxy relation to advertise that proxy.
If the transport used towards the proxy provides name indication (as CoAP over TLS or WebSockets does),
or by using a large number of addresses or ports,
it can even advertise a (more efficient) has-unique-proxy relation.
This is particularly interesting when the advertisements are made available across transports,
for example in a Resource Directory.<a href="#section-5-1" class="pilcrow">Â¶</a></p>
<p id="section-5-2">How the server can discover and trust such a proxy
is out of scope for this document,
but generally involves the same kind of links.
In particular, a server may obtain a link to a third party proxy from an administrator as part of its configuration.<a href="#section-5-2" class="pilcrow">Â¶</a></p>
<p id="section-5-3">The proxy may advertise itself without the origin server's involvement;
in that case, the client needs to take additional care (see <a href="#proxy-foreign-advertisement" class="auto internal xref">Section 9.2</a>).<a href="#section-5-3" class="pilcrow">Â¶</a></p>
<span id="name-http-based-discovery-and-co"></span><div id="fig-external-proxy">
<figure id="figure-3">
        <div class="alignLeft art-text artwork" id="section-5-4.1">
<pre>
Req: GET http://rd.example.com/rd-lookup?if=tag:example.com,sensor

Res:
Content-Format: application/link-format
Payload:
&lt;coap://device0815.example.com/sensors/&gt;;if="tag:example.com,collection",
&lt;coap+wss://device0815.proxy.rd.example.com&gt;;rel=has-unique-proxy;anchor="coap://device0815.example.com/"


Req: to device0815.proxy.rd.example.com on WebSocket
Host (indicated during upgrade): device0815.proxy.rd.example.com
Code: GET
Uri-Path: /sensors/

Res: 2.05 Content
Content-Format: application/link-format
Payload:
&lt;/sensors/temperature&gt;;if="tag:example.com,sensor"
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-http-based-discovery-and-co" class="selfRef">HTTP based discovery and CoAP-over-WS request to a CoAP resource through a has-unique-proxy relation</a>
        </figcaption></figure>
</div>
<div id="generic-advertisements">
<section id="section-5.1">
        <h3 id="name-generic-proxy-advertisement">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-generic-proxy-advertisement" class="section-name selfRef">Generic proxy advertisements</a>
        </h3>
<p id="section-5.1-1">A third party proxy may advertise its availability to act as a proxy for arbitrary CoAP requests.
This use is not directly related to the transport indication in other parts of this document,
but sufficiently similar to warrant being described in the same document.<a href="#section-5.1-1" class="pilcrow">Â¶</a></p>
<p id="section-5.1-2">The resource type "CPA-core.proxy" can be used to describe such a proxy.<a href="#section-5.1-2" class="pilcrow">Â¶</a></p>
<span id="name-a-coap-client-discovers-tha"></span><div id="fig-6lbr-proxy">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-5.1-3.1">
<pre>
Req: GET coap://[fe80::1]/.well-known/core?rt=CPA-core.proxy

Res:
Content-Format: application/link-format
Payload:
&lt;&gt;;rt=CPA-core.proxy

Req: to [fe80::1] via CoAP
Code: GET
Proxy-Scheme: http
Uri-Host: example.com
Uri-Path: /motd
Accept: text/plain

Res: 2.05 Content
Content-Format: text/plain
Payload:
On Monday, October 25th 2021, there is no special message of the day.
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-a-coap-client-discovers-tha" class="selfRef">A CoAP client discovers that its border router can also serve as a proxy, and uses that to access a resource on an HTTP server.</a>
          </figcaption></figure>
</div>
<p id="section-5.1-4">The considerations of <a href="#proxy-foreign-advertisement" class="auto internal xref">Section 9.2</a> apply here.<a href="#section-5.1-4" class="pilcrow">Â¶</a></p>
<p id="section-5.1-5">A generic advertised proxy is always a forward proxy,
and can not be advertised as a "unique" proxy as it would lack information about where to forward.<a href="#section-5.1-5" class="pilcrow">Â¶</a></p>
<p id="section-5.1-6">A proxy may be limited in the URIs it can service,
for technical reasons (e.g. when none of the URI's transports are supported by the server)
or for policy reasons (only accessing servers inside an organizational structure).
Future documents (or versions of this document) may add target attributes
that allow specifying the capabilities of a proxy.
[
An earlier version of this document contained a proxy-schemes attribute.
This was discontinued because it could already not express whether a proxy could access IPv4 or IPv6 peers,
and because the use of schemes is becoming less useful given the new recommendation of incorporating details from registered name resolution into the transport selection.
]<a href="#section-5.1-6" class="pilcrow">Â¶</a></p>
<p id="section-5.1-7">The use of a generic proxy can be limited to a set of devices that have permission to use it.
Clients can be allowed by their network address if they can be verified,
or by using explicit client authentication using the methods of <span>[<a href="#I-D.tiloca-core-oscore-capable-proxies" class="cite xref">I-D.tiloca-core-oscore-capable-proxies</a>]</span>.<a href="#section-5.1-7" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="actualproxies">
<section id="section-6">
      <h2 id="name-client-picked-proxies">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-client-picked-proxies" class="section-name selfRef">Client picked proxies</a>
      </h2>
<p id="section-6-1">This section is purely informative,
and serves to illustrate that the mechanisms introduced in this document do not hinder the continued use of existing proxies.<a href="#section-6-1" class="pilcrow">Â¶</a></p>
<p id="section-6-2">When a resource is accessed through an "actual" proxy (i.e., a host between the client and the server, which itself may have a same-host proxy in addition to that),
the proxy's choice of the upstream server is originally (i.e., without the mechanisms of this document)
either configured (as in a "chain" of proxies)
or determined by the request URI (where a proxy picks CoAP over TCP and resolves the given name for a request aimed at a coap+tcp URI).<a href="#section-6-2" class="pilcrow">Â¶</a></p>
<p id="section-6-3">A proxy that has learned,
by active solicitation of the information or by consulting links in its cache,
that the requested URI is available through a (possibly same-host) proxy,
may use that information
in choosing the upstream transport,
to correct the URI associated with a cached response,
and to use responses obtained through one transport to satisfy requests on another.<a href="#section-6-3" class="pilcrow">Â¶</a></p>
<p id="section-6-4">For example, if a host at coap://h1.example.com has advertised <code>&lt;/res&gt;,&lt;coap+tcp://h1.example.com&gt;;rel=has-proxy;anchor="/"</code>,
then a proxy that has an active CoAP-over-TCP connection to h1.example.com
can forward an incoming request for coap://h1.example.com/res through that CoAP-over-TCP connection
with a suitable Proxy-Scheme and Uri-Host on that connection.<a href="#section-6-4" class="pilcrow">Â¶</a></p>
<p id="section-6-5">If the host had marked the proxy point as <code>&lt;coap+tcp://h1.example.com&gt;;rel=has-unique-proxy</code> instead,
then the proxy could elide the Proxy-Scheme and Uri-Host options,
and would (from the original CoAP caching rules) also be allowed
to use any fresh cache representation of coap+tcp://h1.example.com/res
to satisfy requests for coap://h1.example.com/res.<a href="#section-6-5" class="pilcrow">Â¶</a></p>
<p id="section-6-6">A client that uses a forward proxy
and learns of a different proxy advertised to access a particular resource
will not change its behavior if its original proxy is part of its configuration.
If the forward proxy was only used out of necessity
(e.g., to access a resource whose indicated transport not supported by the client)
it can be practical for the client to use the advertised proxy instead.<a href="#section-6-6" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="service-binding-parameters-for-coap-transports">
<section id="section-7">
      <h2 id="name-service-binding-parameters-">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-service-binding-parameters-" class="section-name selfRef">Service Binding Parameters for CoAP transports</a>
      </h2>
<p id="section-7-1">Discovery mechanisms that exist in DNS <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>, DHCP, Router Advertisements <span>[<a href="#RFC9463" class="cite xref">RFC9463</a>]</span> or other mechanisms
can provide details already that would otherwise only be discovered later through proxy links.
For when those details are provided in the shape of Service Binding Parameters,
this section describes their interpretation in the context of CoAP transport indication.<a href="#section-7-1" class="pilcrow">Â¶</a></p>
<p id="section-7-2">This document is an SVCB mapping document as described in <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>.
As a non-normative overview, the mapping summary (following the template of <span><a href="https://rfc-editor.org/rfc/rfc9460#appendix-B" class="relref">Appendix B</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>)
is as follows:<a href="#section-7-2" class="pilcrow">Â¶</a></p>
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Â </th>
            <th class="text-left" rowspan="1" colspan="1">Â </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Mapped schemes</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">"coap", "coaps", "coap+tcp", "coaps+tcp", "coap+ws", "coaps+ws"</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>RR type</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">SVCB (64)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Name prefix</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">
              <code>_coap</code> for the scheme's default port, else <code>_$PORT._coap</code>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Automatically Mandatory Keys</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">
              <code>port</code>, <code>no-default-alpn</code>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>SvcParam defaults</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">
              <code>alpn</code>: according to scheme (or empty)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Special behaviors</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">Multiple mapped schemes; <code>alpn</code> default influenced by initial URI.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">
              <strong>Keys that records must include</strong>
</td>
            <td class="text-left" rowspan="1" colspan="1">None</td>
          </tr>
        </tbody>
      </table>
<p id="section-7-4">[ The following paragraph is outdated, but its replacement will depend on the outcome of IETF122 discussions. ]<a href="#section-7-4" class="pilcrow">Â¶</a></p>
<p id="section-7-5">The subsections in this section are arranged to describe a consistent sequential full picture.
The capabilities of this big picture are not exercised by any application known at the time of draft publication.
It is instead backed by many small-scope use cases
(such as bootstrapping issues of proxy-link based CoAP scheme unification, <span>[<a href="#I-D.lenders-core-dnr" class="cite xref">I-D.lenders-core-dnr</a>]</span>, <span>[<a href="#I-D.amsuess-t2trg-onion-coap" class="cite xref">I-D.amsuess-t2trg-onion-coap</a>]</span> and also applications outside CoAP such as <span>[<a href="#SUIB" class="cite xref">SUIB</a>]</span>)
and presents a unified solution framework.<a href="#section-7-5" class="pilcrow">Â¶</a></p>
<div id="svcb-discovery">
<section id="section-7.1">
        <h3 id="name-discovering-transport-indic">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-discovering-transport-indic" class="section-name selfRef">Discovering transport indication details from name resolution</a>
        </h3>
<p id="section-7.1-1">This document registers the <code>_coap</code> attrleaf label
in <a href="#iana-underscored" class="auto internal xref">Section 10.5</a>
using the pattern described as described in <span><a href="https://rfc-editor.org/rfc/rfc9460#section-10.4.5" class="relref">Section 10.4.5</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>,
and thus enables the use of SVCB records.
This path is chosen over the creation of a new SVCB RR "COAP"
because it is considered unlikely that DNS implementations would update their code bases to apply SVCB behavior;
this assumption will be revisited before registration.<a href="#section-7.1-1" class="pilcrow">Â¶</a></p>
<p id="section-7.1-2">These can be used during the resolution of URIs that use any CoAP scheme.
The presence of an SVCB record for a registered name
implies that any transport advertised in the record is suitable for proxying to
resources of any CoAP scheme and that registered name,
provided that a resource is available at that URI in the first place.
This does not create URI aliasing:
Any resource is still accessed at its original URI through the advertised proxy endpoints.<a href="#section-7.1-2" class="pilcrow">Â¶</a></p>
<p id="section-7.1-3">It is possible through this to advertise transports without transport layer security
for URIs with the schemes "coaps", "coaps+tcp" and "coaps+ws".
Unless the application explicitly regards an object layer security mechanism as a sufficient replacement for transport layer security,
those transports can not be selected for operations on such URIs as per <a href="#secctx-propagation" class="auto internal xref">Section 3.1</a>.<a href="#section-7.1-3" class="pilcrow">Â¶</a></p>
<p id="section-7.1-4">Some SVCB parameters have defaults; for "_coap", these are:<a href="#section-7.1-4" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-5.1">
            <p id="section-7.1-5.1.1">port: 5683<a href="#section-7.1-5.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.2">
            <p id="section-7.1-5.2.1">ALPN: empty<a href="#section-7.1-5.2.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-7.1-6">As SVCB records were not specified for the existing CoAP transports originally,
generic CoAP clients are not required to use the SVCB lookup mechanism,
but MAY attempt it opportunistically in order to obtain a usable transport
(or to obtain it faster).
Applications built on CoAP MAY require clients to perform this kind of discovery.
Adding such a requirement is particularly useful if the application frequently advertises URIs with a scheme that defaults to a transport which its clients may not support,
or when the application makes use of functionality afforded by <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> such as apex domain redirection.
(Had the SVCB specification predated the first new CoAP transports,
that mechanism might have been used in the first place instead of additional schemes).<a href="#section-7.1-6" class="pilcrow">Â¶</a></p>
<p id="section-7.1-7">[ The following paragraph may need to be revisited depending on the outcome of IETF122 discussions. ]<a href="#section-7.1-7" class="pilcrow">Â¶</a></p>
<p id="section-7.1-8">The effects on a client of seeing SVCB parameters are similar
to those of seeing a "has-proxy" link from the origin to the URI built using {#svcblit}.
The precise implications of any DNSSec-backed applicable credentials expressed in SVCB parameters
are subject to ongoing discussion (especially with regard to whether they apply to the proxy or the origin server).<a href="#section-7.1-8" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="svcparams">
<section id="section-7.2">
        <h3 id="name-service-parameters">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-service-parameters" class="section-name selfRef">Service Parameters</a>
        </h3>
<p id="section-7.2-1">Several parameters are relevant in the context of CoAP,
independently of whether they are used with SVCB records or Service Binding Parameters transported outside SVCB records,
and independently of whether they apply to the <code>_coap</code> service or another service that can be used on top of CoAP (such as <code>_dns</code>):<a href="#section-7.2-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-2.1">
            <p id="section-7.2-2.1.1"><code>port</code>: The CoAP service using the transport described in this parameter is reachable on this port
(described in <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>). It is automatically mandatory.<a href="#section-7.2-2.1.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-2.1.2">
This document does not limit which ports can be used with CoAP.<a href="#section-7.2-2.1.2" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.2">
            <p id="section-7.2-2.2.1"><code>alpn</code>: The ALPN "coap" has been defined for CoAP-over-TLS <span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span>, and "co" for CoAP-over-DTLS in <span>[<a href="#I-D.ietf-core-coap-dtls-alpn" class="cite xref">I-D.ietf-core-coap-dtls-alpn</a>]</span>.<a href="#section-7.2-2.2.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-2.2.2">
If an ALPN service parameter is found, this indicates that the ALPN(s) and thus the CoAP transport that can be used on this address / port.
For example, "co" indicates that DTLS (and thus UDP) is used.<a href="#section-7.2-2.2.2" class="pilcrow">Â¶</a></p>
<p id="section-7.2-2.2.3">
ALPN IDs are defined in this document and in <span>[<a href="#I-D.ietf-core-coap-dtls-alpn" class="cite xref">I-D.ietf-core-coap-dtls-alpn</a>]</span> for the CoAP transports that had no such identifier when they were specified.<a href="#section-7.2-2.2.3" class="pilcrow">Â¶</a></p>
<p id="section-7.2-2.2.4">
The default value of <code>alpn</code> when processing a URI (as in <a href="#processing-scheme-authority" class="auto internal xref">Section 2.1</a>) is the ALPN corresponding to the used scheme.
The default value when not processing a URI (e.g. when processing service parameters from DNR <span>[<a href="#RFC9463" class="cite xref">RFC9463</a>]</span>) is empty.<a href="#section-7.2-2.2.4" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.3">
            <p id="section-7.2-2.3.1"><code>no-default-alpn</code>, <code>mandatory</code>, <code>ipv4hint</code>, <code>ipv6hint</code>:
Used as described in <span><a href="https://rfc-editor.org/rfc/rfc9460#section-7" class="relref">Section 7</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>.<a href="#section-7.2-2.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.4">
            <p id="section-7.2-2.4.1"><code>is-unique-proxy</code>: This is a new parameter defined in this document,
and equivalent to the <code>has-unique-proxy</code> in its semantics.<a href="#section-7.2-2.4.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-2.4.2">
Its value is empty.<a href="#section-7.2-2.4.2" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.5">
            <p id="section-7.2-2.5.1">Applications may extend the supported parameters.
In particular, <span>[<a href="#I-D.ietf-core-dns-over-coap" class="cite xref">I-D.ietf-core-dns-over-coap</a>]</span> has already introduced the <code>docpath</code> parameter
which indicates a path at which DNS-over-CoAP is available at the given address.<a href="#section-7.2-2.5.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-7.2-3">The following parameters are under consideration for inclusion in this list,
but it is unsure whether they are suitable.
Those parameters would describe the origin server
and not the individual (proxy) transport through which it can be reached.<a href="#section-7.2-3" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-4.1">
            <p id="section-7.2-4.1.1"><code>cred</code>: This is a new parameter defined in this document, and describes COSE credentials that can authenticate the server, e.g. when used with EDHOC.<a href="#section-7.2-4.1.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.1.2">
The <code>cred</code> parameter's value is a CBOR sequence of COSE Header maps as defined in <span>[<a href="#RFC9052" class="cite xref">RFC9052</a>]</span>.
If the parameter is present, it indicates that
the server can be authenticated by any credential expressed in the sequence.
This is similar to the TLSA records specified in <span>[<a href="#RFC6698" class="cite xref">RFC6698</a>]</span>.<a href="#section-7.2-4.1.2" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.1.3">
A COSE Header map can express many properties, not all of which are sufficient to authenticate a peer on any given security mechanism.
Without excluding applications that may process other entries,
a practical criterion for whether a header map is suitable for EDHOC is that the header map could also be used in EDHOC as <code>ID_CRED_R</code>
if the credential is sent by value.<a href="#section-7.2-4.1.3" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.1.4">
For example, a header map with a <code>kccs</code> entry can be used to indicate a public key including a Key ID (<code>kid</code>),
and that public key does not need to be sent during the EDHOC exchange.
Alternatively, a header map with an <code>x5t</code> identifies the end entity certificate the server presents by a thumbprint (hash).<a href="#section-7.2-4.1.4" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.1.5">
It is up to the application to define requirements for the provenance of the <code>cred</code> parameter,
whether it needs to be provided through secure mechanism,
or whether the server is strictly required to present that credential.<a href="#section-7.2-4.1.5" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.1.6">
This is unlike TLSA, which needs to be transported through DNSSEC,
because a <code>cred</code> parameter may be sent using other means than DNS
(for example in DHCPv6 responses or Router Advertisements).<a href="#section-7.2-4.1.6" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-4.2">
            <p id="section-7.2-4.2.1"><code>edhoc-info</code>: This is a new parameter defined in this document, describing how EDHOC can be used on the server.<a href="#section-7.2-4.2.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.2.2">
The value of the parameter is a CBOR array following the <code>APP_PROF_SEQ</code> structure defined in <span>[<a href="#I-D.tiloca-lake-app-profiles" class="cite xref">I-D.tiloca-lake-app-profiles</a>]</span>.<a href="#section-7.2-4.2.2" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.2.3">
It is optional to provide and optional to process, but can help speed up the establishment of a security context.<a href="#section-7.2-4.2.3" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.2-4.3">
            <p id="section-7.2-4.3.1"><code>oauth-hints</code>: This is a new parameter defined in this document,
describing how ACE-OAuth <span>[<a href="#RFC9200" class="cite xref">RFC9200</a>]</span> can be used with this service.<a href="#section-7.2-4.3.1" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.3.2">
Its value is a CBOR map containing AS Request Creation Hints as described in <span><a href="https://rfc-editor.org/rfc/rfc9200#section-5.3" class="relref">Section 5.3</a> of [<a href="#RFC9200" class="cite xref">RFC9200</a>]</span>.
While an empty map can be useful (hinting that the client should use its configured ACE-OAuth setup),
typical useful keys are
1 (AS, indicating the URI of the Authorization Server),
5 (audience, indicating the name under which the service is known to the Authorization Server),
and 9 (scope, when discovering a particular service rather than just getting transport information for a host).
That data is using the same shape the server might use when responding to an attempt at an unencrypted connection,
and can not only speed up the discovery of the right AS,
but can also protect that information (e.g. when DNSSEC is used),
and avoids the need for an unprotected first request.<a href="#section-7.2-4.3.2" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.3.3">
It is up to the application to define requirements for the use of such data.
For example,
it may require that the audience matches the requested host name,
or may require that the scope matches the kind of service being discovered.<a href="#section-7.2-4.3.3" class="pilcrow">Â¶</a></p>
<p id="section-7.2-4.3.4">
When expressed in text format, e.g. in DNS zone files,
the CBOR diagnostic notation <span>[<a href="#I-D.ietf-cbor-edn-literals" class="cite xref">I-D.ietf-cbor-edn-literals</a>]</span> can be used.<a href="#section-7.2-4.3.4" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<div id="examples-of-using-name-resolution-discovery-and-parameters">
<section id="section-7.2.1">
          <h4 id="name-examples-of-using-name-reso">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-examples-of-using-name-reso" class="section-name selfRef">Examples of using name resolution discovery and parameters</a>
          </h4>
<div id="generic-client-discovering-transport-options">
<section id="section-7.2.1.1">
            <h5 id="name-generic-client-discovering-">
<a href="#section-7.2.1.1" class="section-number selfRef">7.2.1.1. </a><a href="#name-generic-client-discovering-" class="section-name selfRef">Generic client discovering transport options</a>
            </h5>
<p id="section-7.2.1.1-1">A generic client is directed to obtain <code>coap://dev1.example.com/log</code>
requests the name to be resolved using the system's resolution mechanisms,
resulting in a DNS query for these records:<a href="#section-7.2.1.1-1" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1.1-2">
<pre>
_coap.dev1.example.com IN SVCB
dev1.example.com       IN AAAA
</pre><a href="#section-7.2.1.1-2" class="pilcrow">Â¶</a>
</div>
<p id="section-7.2.1.1-3">The following records are returned:<a href="#section-7.2.1.1-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1.1-4">
<pre>
_coap.dev1.example.com IN SVCB 1 . alpn=COAP,CO
_coap.dev1.example.com IN SVCB 1 . alpn=co,coap port=5684
_coap.dev1.example.com IN SVCB 1 . alpn=CO port=61616
dev1.example.com       IN AAAA 2001:db8:1::1
</pre><a href="#section-7.2.1.1-4" class="pilcrow">Â¶</a>
</div>
<p id="section-7.2.1.1-5">Exceeding the single option it had with just the IP address,
it may now also choose to establish a TCP connection on the default port,
to use port 61616 for UDP (which results in more compact frames on a 6LoWPAN link),
or to use either of the TLS based options.<a href="#section-7.2.1.1-5" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="application-mandating-svcb">
<section id="section-7.2.1.2">
            <h5 id="name-application-mandating-svcb">
<a href="#section-7.2.1.2" class="section-number selfRef">7.2.1.2. </a><a href="#name-application-mandating-svcb" class="section-name selfRef">Application mandating SVCB</a>
            </h5>
<p id="section-7.2.1.2-1">An example application's policy is to mandate client support for SVCB records,
and to require that a security mechanism must be used where credentials are backed either by DNSSEC or by the Web PKI.<a href="#section-7.2.1.2-1" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1.2-2">A server operator is running in a legacy network that only provides an IPv4 address behind NAT with a dynamic public address,
but has PCP <span>[<a href="#RFC7291" class="cite xref">RFC7291</a>]</span> available.
After running PCP to open a UDP port,
it learns that 1.2.3.4:5678 will be available for some time.<a href="#section-7.2.1.2-2" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1.2-3">It therefore updates its DNS record like this:<a href="#section-7.2.1.2-3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2.1.2-4">
<pre>
_coap.host.example.net 600 IN SVCB 1 publicudp.host.example.net       \
                       port=5678                                      \
                       cred={14:{... /KCCS with its public key/}}
</pre><a href="#section-7.2.1.2-4" class="pilcrow">Â¶</a>
</div>
<p id="section-7.2.1.2-5">When a client starts using <code>coap://host.example.net/interactive</code>,
it looks up that record and verifies it using DNSSEC.
It then proceeds to send EDHOC requests over CoAP to 1.2.3.4 port 5678,
setting the Uri-Host option to "host.example.net".<a href="#section-7.2.1.2-5" class="pilcrow">Â¶</a></p>
<p id="section-7.2.1.2-6">The client could also have initiated an EDHOC session if no cred parameter had been present,
but then,
it would have required that the server present some credential that could be verified through the Web PKI,
for example an x5chain containing a Let's Encrypt certificate.<a href="#section-7.2.1.2-6" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="svcb2uri">
<section id="section-7.3">
        <h3 id="name-producing-requests-for-a-di">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-producing-requests-for-a-di" class="section-name selfRef">Producing requests for a discovered service</a>
        </h3>
<p id="section-7.3-1">If a service's discovery process does not produce a URI but an address, host name and/or Service Binding Parameters,
those can be converted to a CoAP URI,
for which transport hints are already encoded in the parameters the URI is constructed from.
An example of this is DNS server discovery <span>[<a href="#I-D.ietf-core-coap-dtls-alpn" class="cite xref">I-D.ietf-core-coap-dtls-alpn</a>]</span>.<a href="#section-7.3-1" class="pilcrow">Â¶</a></p>
<p id="section-7.3-2">While it is up to the service to define the service's semantics,
this section applies to any service
whose use with CoAP is defined by a normative referencing this section:<a href="#section-7.3-2" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.3-3.1">
            <p id="section-7.3-3.1.1">The client tries the available services with their ALPNs and CoAP transports
according to its capabilities
and the priorities and mandatory parameters
as defined for Service Bindings.<a href="#section-7.3-3.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.3-3.2">
            <p id="section-7.3-3.2.1">The service either defines a well-known path,
or it defines a Service Binding Parameter that describes the service's path on the described endpoint,
or it defines both (and the well-known path is the default in absence of the defined parameter).<a href="#section-7.3-3.2.1" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.2">
The value is a CBOR sequence <span>[<a href="#RFC8742" class="cite xref">RFC8742</a>]</span> of text strings,
which represent Uri-Path options in a CoAP request,
or (equivalently) the path of a CRI reference
<span>[<a href="#I-D.ietf-core-href" class="cite xref">I-D.ietf-core-href</a>]</span>.<a href="#section-7.3-3.2.2" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.3">
A parameter value that is not a well-formed CBOR sequence,
or any item is not a text string,
is considerd malformed.<a href="#section-7.3-3.2.3" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.4">
When expressed in text format, e.g. in DNS zone files,
the CBOR diagnostic notation <span>[<a href="#I-D.ietf-cbor-edn-literals" class="cite xref">I-D.ietf-cbor-edn-literals</a>]</span> can be used.<a href="#section-7.3-3.2.4" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.5">
To access the service,
a client sets the text string values
of the used Service Binding parameter
as Uri-Path options in the request.<a href="#section-7.3-3.2.5" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.6">
If the resource is unavailable,
the client may continue with options that have a larger SvcPriority value associated
(if such a property exists in the discovery method).<a href="#section-7.3-3.2.6" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.2.7">
An example of such an option is <code>docpath</code>
as defined in <span>[<a href="#I-D.ietf-core-dns-over-coap" class="cite xref">I-D.ietf-core-dns-over-coap</a>]</span>.
(As that document precedes this one,
it repeats the same rules explicitly rather than reusing these rules).<a href="#section-7.3-3.2.7" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.3-3.3">
            <p id="section-7.3-3.3.1">A Service Binding is accompanied by a hostname:
For example,
this is the hostname of the Encrypted DNS Resolver or the Special-Use Domain Name
in the case of <span>[<a href="#RFC9462" class="cite xref">RFC9462</a>]</span> lookups,
or the authentication-domain-name in case of <span>[<a href="#RFC9463" class="cite xref">RFC9463</a>]</span> DHCP options or Router Advertisements.<a href="#section-7.3-3.3.1" class="pilcrow">Â¶</a></p>
<p id="section-7.3-3.3.2">
Unless its value is identical to the default value for Uri-Host
(which is the case on transports with Server Name Indication (SNI)),
the that name is added in the Uri-Host option.<a href="#section-7.3-3.3.2" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.3-3.4">
            <p id="section-7.3-3.4.1">If the <code>port</code> Service Binding Parameter is set,
the Uri-Port option is set to the port that set in the port prefix of the query
(or the used CoAP transport's default port),
unless that is its default value anyway.<a href="#section-7.3-3.4.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-7.3-3.5">
            <p id="section-7.3-3.5.1">No Proxy-Scheme option is set.<a href="#section-7.3-3.5.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-7.3-4">By following the rules of <span><a href="https://rfc-editor.org/rfc/rfc7252#section-6.5" class="relref">Section 6.5</a> of [<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>
or the equivalent rules for the respective CoAP transport,

the service can be translated into a URI.
This implies URI aliasing between the composed URIs of all transports
if any of the transports use different schemes.<a href="#section-7.3-4" class="pilcrow">Â¶</a></p>
<p id="section-7.3-5">The rules for setting Uri-Host and Uri-Port result in the authority component of the URI
being equal to the Binding Authority defined in <span>[<a href="#RFC9461" class="cite xref">RFC9461</a>]</span>.<a href="#section-7.3-5" class="pilcrow">Â¶</a></p>
<p id="section-7.3-6">Note that since different security policies may apply to service discovery
and other application components that dereference URIs,
any connections established while using the service
and cache entries created by it
need to be treated carefully,
for example by using separate connection and cache pools.<a href="#section-7.3-6" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="svcblit">
<section id="section-7.4">
        <h3 id="name-expressing-service-paramete">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-expressing-service-paramete" class="section-name selfRef">Expressing Service Parameters as literals</a>
        </h3>
<p id="section-7.4-1">A method for expressing Service Parameters in URIs that do not use registered names
is described in <a href="#newlit" class="auto internal xref">Appendix E</a>.<a href="#section-7.4-1" class="pilcrow">Â¶</a></p>
<p id="section-7.4-2">Among other things,
that mechanism allows encoding the full information obtained during service discovery in a URI
instead of just the one choice taken.
It is also required if different CoAP transports are using the same scheme
(as is recommended in <a href="#upcomingtransports" class="auto internal xref">Section 8</a>)
with IP address literals in URIs,
for which unlike for resolved names no service parameters are available.<a href="#section-7.4-2" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="upcomingtransports">
<section id="section-8">
      <h2 id="name-guidance-to-upcoming-transp">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-guidance-to-upcoming-transp" class="section-name selfRef">Guidance to upcoming transports</a>
      </h2>
<p id="section-8-1">When new transports are defined for CoAP,
it is recommended to use the "coap" scheme
(or "coaps" for TLS based transports).<a href="#section-8-1" class="pilcrow">Â¶</a></p>
<p id="section-8-2">If the transport's identifiers are IP based and have identifiers typically resolved through DNS,
authors of new transports are encouraged to specify how they are expressed in Service Binding records (<span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>),
e.g., using an <code>alpn</code> parameter (which does not necessarily indicate the use of a TLS based transport),
and if IP literals are relevant to the transport, to follow up on <a href="#newlit" class="auto internal xref">Appendix E</a>.<a href="#section-8-2" class="pilcrow">Â¶</a></p>
<p id="section-8-3">If the transport's native identifiers are compatible with the structure of the authority component of a URI,
those identifiers can be used as an authority as-is.
To help the host decide the resolution mechanism,
it may be helpful to register a subdomain of .arpa as described in <span>[<a href="#rfc3172" class="cite xref">rfc3172</a>]</span>.
The guidence for users is to never attempt to resolve such a name,
and for the zone's implementation is to return NXDOMAIN unconditionally.<a href="#section-8-3" class="pilcrow">Â¶</a></p>
<p id="section-8-4">If the transport's native identifiers are incompatible with that structure
(e.g. because they contain colons),
the document may define some transformation.<a href="#section-8-4" class="pilcrow">Â¶</a></p>
<p id="section-8-5">If a transport's native identifiers are only local,
the zone .alt <span>[<a href="#rfc9476" class="cite xref">rfc9476</a>]</span> may be used instead.<a href="#section-8-5" class="pilcrow">Â¶</a></p>
<p id="section-8-6">For example,
CoAP over GATT <span>[<a href="#I-D.amsuess-core-coap-over-gatt" class="cite xref">I-D.amsuess-core-coap-over-gatt</a>]</span>
removes the colons from Bluetooth Low Energy MAC addresses like 00:11:22:33:44:55
and combines them into authority components such as <code>001122334455.ble.arpa</code>.
Slipmux <span>[<a href="#I-D.bormann-t2trg-slipmux" class="cite xref">I-D.bormann-t2trg-slipmux</a>]</span>
might use the locally significant device name <code>/dev/ttyUSB0</code>
as <code>coap://ttyUSB0.dev.alt/</code>.<a href="#section-8-6" class="pilcrow">Â¶</a></p>
<p id="section-8-7">URIs created from such names may not indicate the protocol uniquely:
Additional transports specified later may also provide CoAP services for the same name.
In the sense of <a href="#identifying" class="auto internal xref">Section 1.5.1</a>,
both transport would be identified by that URI.
That is not an issue as long as the protocols underneath the CoAP transport
provide a means of advertising the precise protocol used.
For example,
a hypothetical CoAP transport for BLE that is not GATT based
can be selected for the same scheme and authority based on data in the BLE advertisement.<a href="#section-8-7" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security considerations</a>
      </h2>
<div id="security-context-propagation">
<section id="section-9.1">
        <h3 id="name-security-context-propagation">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-security-context-propagation" class="section-name selfRef">Security context propagation</a>
        </h3>
<p id="section-9.1-1">Clients need to strictly enforce the rules of <a href="#secctx-propagation" class="auto internal xref">Section 3.1</a>.
Failure to do so,
in particular using a thusly announced proxy based on a certificate that attests the proxy's name,
would allow attackers to circumvent the client's security expectation.<a href="#section-9.1-1" class="pilcrow">Â¶</a></p>
<p id="section-9.1-2">When security is terminated at proxies (as is in DTLS and TLS),
a third party proxy can usually not satisfy this requirement;
these transports are limited to same-host proxies.<a href="#section-9.1-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="proxy-foreign-advertisement">
<section id="section-9.2">
        <h3 id="name-traffic-misdirection">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-traffic-misdirection" class="section-name selfRef">Traffic misdirection</a>
        </h3>
<p id="section-9.2-1">Accepting arbitrary proxies,
even with security context propagation performed properly,
would allow attackers to redirect traffic through systems under their control.
Not only does that impact availability,
it also allows an attacker to observe traffic patterns.<a href="#section-9.2-1" class="pilcrow">Â¶</a></p>
<p id="section-9.2-2">This affects both OSCORE and (D)TLS,
as neither protect the participants' network addresses.<a href="#section-9.2-2" class="pilcrow">Â¶</a></p>
<p id="section-9.2-3">Other than the security context propagation rules,
there are no hard and general rules about when an advertised proxy is a suitable candidate.
Aspects for consideration are:<a href="#section-9.2-3" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.2-4.1">
            <p id="section-9.2-4.1.1">When no direct connection is possible
(e.g. because the resource to be accessed is served as coap+tcp and TCP is not implemented in the client,
or because the resource's host is available on IPv6 while the client has no default IPv6 route),
using a proxy is necessary if complete service disruption is to be avoided.<a href="#section-9.2-4.1.1" class="pilcrow">Â¶</a></p>
<p id="section-9.2-4.1.2">
While an adversary can cause such a situation (e.g. by manipulating routing or DNS entries),
such an adversary is usually already in a position to observe traffic patterns.<a href="#section-9.2-4.1.2" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="section-9.2-4.2">
            <p id="section-9.2-4.2.1">A proxy advertised by the device hosting the resource to be accessed is less risky to use than one advertised by a third party.<a href="#section-9.2-4.2.1" class="pilcrow">Â¶</a></p>
<p id="section-9.2-4.2.2">
The <code>/.well-known/core</code> resource is regarded as a source of authoritative information on the endpoint's CoAP related metadata,
and can be queried early in the discovery process,
or queried for verification (with filtering applied) after discovery through an RD.
Other resources may be less trustworthy as they may be controlled by entities not trusted with the endpoint's traffic.<a href="#section-9.2-4.2.2" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-9.2-5"><a href="#ead" class="auto internal xref">Appendix D</a> describes an extension to <span>[<a href="#I-D.ietf-lake-edhoc" class="cite xref">I-D.ietf-lake-edhoc</a>]</span> by which the client can verify that the proxy used by the client is recognized by the server.
This is similar to querying <code>/.well-known/core</code> for any proxies advertised there,
but happens earlier in the connection establishment,
and leaves the decision whether the proxy is legitimate to the server.<a href="#section-9.2-5" class="pilcrow">Â¶</a></p>
<p id="section-9.2-6">It only conveys information about the URI of the proxy.
The mapping of any host name inside it to an IP address,
or of an IP address to a routing decision,
is left to the security mechanisms of the respective layers.<a href="#section-9.2-6" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="protecting-the-proxy">
<section id="section-9.3">
        <h3 id="name-protecting-the-proxy">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-protecting-the-proxy" class="section-name selfRef">Protecting the proxy</a>
        </h3>
<p id="section-9.3-1">A widely published statement about a host's availability as a proxy can cause many clients to attempt to use it.<a href="#section-9.3-1" class="pilcrow">Â¶</a></p>
<p id="section-9.3-2">This is mitigated in well-behaved clients by observing the rate limits of <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>,
and by ceasing attempts to reach a proxy for the Max-Age of received errors.<a href="#section-9.3-2" class="pilcrow">Â¶</a></p>
<p id="section-9.3-3">Operators can further limit ill-effects
by ensuring that their client systems do not needlessly use proxies advertised in an unsecured way,
and by providing own proxies when their clients need them.<a href="#section-9.3-3" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA considerations</a>
      </h2>
<div id="link-relation-types">
<section id="section-10.1">
        <h3 id="name-link-relation-types">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-link-relation-types" class="section-name selfRef">Link Relation Types</a>
        </h3>
<p id="section-10.1-1">IANA is asked to add two entries into the Link Relation Type Registry last updated in <span>[<a href="#RFC8288" class="cite xref">RFC8288</a>]</span>:<a href="#section-10.1-1" class="pilcrow">Â¶</a></p>
<span id="name-new-link-relation-types"></span><div id="tab-iana">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-new-link-relation-types" class="selfRef">New Link Relation types</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Relation Name</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">has-proxy</td>
              <td class="text-left" rowspan="1" colspan="1">The link target can be used as a proxy to reach URIs inside the origin of the link context.</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">has-unique-proxy</td>
              <td class="text-left" rowspan="1" colspan="1">Like has-proxy, and using this proxy implies scheme and host of the target.</td>
              <td class="text-left" rowspan="1" colspan="1">RFCthis</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="resource-types">
<section id="section-10.2">
        <h3 id="name-resource-types">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-resource-types" class="section-name selfRef">Resource Types</a>
        </h3>
<p id="section-10.2-1">IANA is asked to add an entry into the "Resource Type (rt=) Link Target Attribute Values" registry under the Constrained RESTful Environments (CoRE) Parameters:<a href="#section-10.2-1" class="pilcrow">Â¶</a></p>
<p id="section-10.2-2">[ The RFC Editor is asked to replace any occurrence of CPA-core.proxy with the actually registered attribute value. ]<a href="#section-10.2-2" class="pilcrow">Â¶</a></p>
<p id="section-10.2-3">Attribute Value: core.proxy<a href="#section-10.2-3" class="pilcrow">Â¶</a></p>
<p id="section-10.2-4">Description: Forward proxying services<a href="#section-10.2-4" class="pilcrow">Â¶</a></p>
<p id="section-10.2-5">Reference: [ this document ]<a href="#section-10.2-5" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="tls-application-layer-protocol-negotiation-alpn-protocol-ids">
<section id="section-10.3">
        <h3 id="name-tls-application-layer-proto">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-tls-application-layer-proto" class="section-name selfRef">TLS Application-Layer Protocol Negotiation (ALPN) Protocol IDs</a>
        </h3>
<p id="section-10.3-1">IANA is requested to add the following entries to the TLS Application-Layer Protocol Negotiation (ALPN) Protocol IDs
registry (<span>[<a href="#RFC7301" class="cite xref">RFC7301</a>]</span>).<a href="#section-10.3-1" class="pilcrow">Â¶</a></p>
<p id="section-10.3-2">The identification sequences are suggestions to be approvded by the reviewers<a href="#section-10.3-2" class="pilcrow">Â¶</a></p>
<table class="center" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Protocol</th>
              <th class="text-left" rowspan="1" colspan="1">Identification sequence</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CoAP (over UDP)</td>
              <td class="text-left" rowspan="1" colspan="1">0x43 0x4f ("CO")</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CoAP (over TCP)</td>
              <td class="text-left" rowspan="1" colspan="1">0x43 0x4f 0x41 0x50 ("COAP")</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span>
</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="service-parameter-key-svcparamkey">
<section id="section-10.4">
        <h3 id="name-service-parameter-key-svcpa">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-service-parameter-key-svcpa" class="section-name selfRef">Service Parameter Key (SvcParamKey)</a>
        </h3>
<p id="section-10.4-1">IANA is NOT YET requested to add the following entries to the SVCB Service Parameters
registry (<span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>). The definition of this parameter can be found in <a href="#upcomingtransports" class="auto internal xref">Section 8</a>.<a href="#section-10.4-1" class="pilcrow">Â¶</a></p>
<table class="center" id="table-4">
          <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Number</th>
              <th class="text-left" rowspan="1" colspan="1">Name</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">to be assigned</td>
              <td class="text-left" rowspan="1" colspan="1">cred</td>
              <td class="text-left" rowspan="1" colspan="1">COSE credentials identifying the server</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">to be assigned</td>
              <td class="text-left" rowspan="1" colspan="1">edhoc-info</td>
              <td class="text-left" rowspan="1" colspan="1">EDHOC profile information</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">to be assigned</td>
              <td class="text-left" rowspan="1" colspan="1">oauth-hints</td>
              <td class="text-left" rowspan="1" colspan="1">Describes how to obtain a token at an ACE Authorization Server</td>
            </tr>
          </tbody>
        </table>
<p id="section-10.4-3">All entries have in common that their Reference is this this document, <a href="#svcparams" class="auto internal xref">Section 7.2</a>},
and that their change controller is IETF.<a href="#section-10.4-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="iana-underscored">
<section id="section-10.5">
        <h3 id="name-underscored-and-globally-sc">
<a href="#section-10.5" class="section-number selfRef">10.5. </a><a href="#name-underscored-and-globally-sc" class="section-name selfRef">Underscored and Globally Scoped DNS Node Names</a>
        </h3>
<p id="section-10.5-1">IANA is NOT YET requested to add the following entry to the Underscored and Globally Scoped DNS Node Names registry
(in the DNS Parameters group)
established in <span>[<a href="#RFC8552" class="cite xref">RFC8552</a>]</span>
and thus enables its use with SVCB records:<a href="#section-10.5-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.5-2.1">
            <p id="section-10.5-2.1.1">SVCB, <code>_coap</code>, <a href="#svcb-discovery" class="auto internal xref">Section 7.1</a> of this document<a href="#section-10.5-2.1.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="section-10.5-3">The request for registration is deliberately not expressed at this point
because it is yet to be revisited whether the creation of a "COAP" RR
similar to the "HTTPS" RR would be preferable.<a href="#section-10.5-3" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-core-href">[I-D.ietf-core-href]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">H. Birkholz</span>, <span class="refTitle">"Constrained Resource Identifiers"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-href-23</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-href-23">https://datatracker.ietf.org/doc/html/draft-ietf-core-href-23</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6690">[RFC6690]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refTitle">"Constrained RESTful Environments (CoRE) Link Format"</span>, <span class="seriesInfo">RFC 6690</span>, <span class="seriesInfo">DOI 10.17487/RFC6690</span>, <time datetime="2012-08" class="refDate">August 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6690">https://www.rfc-editor.org/rfc/rfc6690</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7252">[RFC7252]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Hartke, K.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"The Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7252</span>, <span class="seriesInfo">DOI 10.17487/RFC7252</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7252">https://www.rfc-editor.org/rfc/rfc7252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8288">[RFC8288]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"Web Linking"</span>, <span class="seriesInfo">RFC 8288</span>, <span class="seriesInfo">DOI 10.17487/RFC8288</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8288">https://www.rfc-editor.org/rfc/rfc8288</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8742">[RFC8742]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR) Sequences"</span>, <span class="seriesInfo">RFC 8742</span>, <span class="seriesInfo">DOI 10.17487/RFC8742</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8742">https://www.rfc-editor.org/rfc/rfc8742</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9052">[RFC9052]</dt>
        <dd>
<span class="refAuthor">Schaad, J.</span>, <span class="refTitle">"CBOR Object Signing and Encryption (COSE): Structures and Process"</span>, <span class="seriesInfo">STD 96</span>, <span class="seriesInfo">RFC 9052</span>, <span class="seriesInfo">DOI 10.17487/RFC9052</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9052">https://www.rfc-editor.org/rfc/rfc9052</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9460">[RFC9460]</dt>
      <dd>
<span class="refAuthor">Schwartz, B.</span>, <span class="refAuthor">Bishop, M.</span>, and <span class="refAuthor">E. Nygren</span>, <span class="refTitle">"Service Binding and Parameter Specification via the DNS (SVCB and HTTPS Resource Records)"</span>, <span class="seriesInfo">RFC 9460</span>, <span class="seriesInfo">DOI 10.17487/RFC9460</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9460">https://www.rfc-editor.org/rfc/rfc9460</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="aliases">[aliases]</dt>
        <dd>
<span class="refAuthor">W3C</span>, <span class="refTitle">"Architecture of the World Wide Web, Section 2.3.1 URI aliases"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.w3.org/TR/webarch/#uri-aliases">https://www.w3.org/TR/webarch/#uri-aliases</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="cooluris">[cooluris]</dt>
        <dd>
<span class="refAuthor">BL, T.</span>, <span class="refTitle">"Cool URIs don't change"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.w3.org/Provider/Style/URI">https://www.w3.org/Provider/Style/URI</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="evossl">[evossl]</dt>
        <dd>
<span class="refAuthor">Baier, E.</span>, <span class="refTitle">"The Evolution of SSL and TLS"</span>, <time datetime="2015-02-02" class="refDate">2 February 2015</time>, <span>&lt;<a href="https://www.digicert.com/blog/evolution-of-ssl">https://www.digicert.com/blog/evolution-of-ssl</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.amsuess-core-coap-over-gatt">[I-D.amsuess-core-coap-over-gatt]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refTitle">"CoAP over GATT (Bluetooth Low Energy Generic Attributes)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-amsuess-core-coap-over-gatt-07</span>, <time datetime="2024-09-25" class="refDate">25 September 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-amsuess-core-coap-over-gatt-07">https://datatracker.ietf.org/doc/html/draft-amsuess-core-coap-over-gatt-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.amsuess-core-resource-directory-extensions">[I-D.amsuess-core-resource-directory-extensions]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refTitle">"CoRE Resource Directory Extensions"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-amsuess-core-resource-directory-extensions-11</span>, <time datetime="2024-11-06" class="refDate">6 November 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-amsuess-core-resource-directory-extensions-11">https://datatracker.ietf.org/doc/html/draft-amsuess-core-resource-directory-extensions-11</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.amsuess-t2trg-onion-coap">[I-D.amsuess-t2trg-onion-coap]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refAuthor">Tiloca, M.</span>, and <span class="refAuthor">R. HÃ¶glund</span>, <span class="refTitle">"Using onion routing with CoAP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-amsuess-t2trg-onion-coap-03</span>, <time datetime="2024-11-17" class="refDate">17 November 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-amsuess-t2trg-onion-coap-03">https://datatracker.ietf.org/doc/html/draft-amsuess-t2trg-onion-coap-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.amsuess-t2trg-rdlink">[I-D.amsuess-t2trg-rdlink]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refTitle">"rdlink: Robust distributed links to constrained devices"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-amsuess-t2trg-rdlink-01</span>, <time datetime="2019-09-23" class="refDate">23 September 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-amsuess-t2trg-rdlink-01">https://datatracker.ietf.org/doc/html/draft-amsuess-t2trg-rdlink-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.bormann-t2trg-slipmux">[I-D.bormann-t2trg-slipmux]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">T. Kaupat</span>, <span class="refTitle">"Slipmux: Using an UART interface for diagnostics, configuration, and packet transfer"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-bormann-t2trg-slipmux-03</span>, <time datetime="2019-11-04" class="refDate">4 November 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-bormann-t2trg-slipmux-03">https://datatracker.ietf.org/doc/html/draft-bormann-t2trg-slipmux-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-cbor-edn-literals">[I-D.ietf-cbor-edn-literals]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refTitle">"CBOR Extended Diagnostic Notation (EDN)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-cbor-edn-literals-18</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-cbor-edn-literals-18">https://datatracker.ietf.org/doc/html/draft-ietf-cbor-edn-literals-18</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-coap-dtls-alpn">[I-D.ietf-core-coap-dtls-alpn]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. WÃ¤hlisch</span>, <span class="refTitle">"ALPN ID Specification for CoAP over DTLS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-coap-dtls-alpn-04</span>, <time datetime="2025-04-01" class="refDate">1 April 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-coap-dtls-alpn-04">https://datatracker.ietf.org/doc/html/draft-ietf-core-coap-dtls-alpn-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-dns-over-coap">[I-D.ietf-core-dns-over-coap]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refAuthor">GÃ¼ndoÄan, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. WÃ¤hlisch</span>, <span class="refTitle">"DNS over CoAP (DoC)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-dns-over-coap-16</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-16">https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-16</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lake-edhoc">[I-D.ietf-lake-edhoc]</dt>
        <dd>
<span class="refAuthor">Selander, G.</span>, <span class="refAuthor">Mattsson, J. P.</span>, and <span class="refAuthor">F. Palombini</span>, <span class="refTitle">"Ephemeral Diffie-Hellman Over COSE (EDHOC)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lake-edhoc-23</span>, <time datetime="2024-01-22" class="refDate">22 January 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-lake-edhoc-23">https://datatracker.ietf.org/doc/html/draft-ietf-lake-edhoc-23</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lpwan-coap-static-context-hc">[I-D.ietf-lpwan-coap-static-context-hc]</dt>
        <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, and <span class="refAuthor">R. Andreasen</span>, <span class="refTitle">"Static Context Header Compression (SCHC) for the Constrained Application Protocol (CoAP)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lpwan-coap-static-context-hc-19</span>, <time datetime="2021-03-08" class="refDate">8 March 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-lpwan-coap-static-context-hc-19">https://datatracker.ietf.org/doc/html/draft-ietf-lpwan-coap-static-context-hc-19</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-tls-esni">[I-D.ietf-tls-esni]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refAuthor">Oku, K.</span>, <span class="refAuthor">Sullivan, N.</span>, and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"TLS Encrypted Client Hello"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-tls-esni-25</span>, <time datetime="2025-06-14" class="refDate">14 June 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni-25">https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni-25</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.lenders-core-dnr">[I-D.lenders-core-dnr]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">AmsÃ¼ss, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. WÃ¤hlisch</span>, <span class="refTitle">"Discovery of Network-designated OSCORE-based Resolvers: Problem Statement"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-lenders-core-dnr-06</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-lenders-core-dnr-06">https://datatracker.ietf.org/doc/html/draft-lenders-core-dnr-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.silverajan-core-coap-protocol-negotiation">[I-D.silverajan-core-coap-protocol-negotiation]</dt>
        <dd>
<span class="refAuthor">Silverajan, B.</span> and <span class="refAuthor">M. Ocak</span>, <span class="refTitle">"CoAP Protocol Negotiation"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-silverajan-core-coap-protocol-negotiation-09</span>, <time datetime="2018-07-02" class="refDate">2 July 2018</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-silverajan-core-coap-protocol-negotiation-09">https://datatracker.ietf.org/doc/html/draft-silverajan-core-coap-protocol-negotiation-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.tiloca-core-oscore-capable-proxies">[I-D.tiloca-core-oscore-capable-proxies]</dt>
        <dd>
<span class="refAuthor">Tiloca, M.</span> and <span class="refAuthor">R. HÃ¶glund</span>, <span class="refTitle">"OSCORE-capable Proxies"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-tiloca-core-oscore-capable-proxies-07</span>, <time datetime="2023-07-10" class="refDate">10 July 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-tiloca-core-oscore-capable-proxies-07">https://datatracker.ietf.org/doc/html/draft-tiloca-core-oscore-capable-proxies-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.tiloca-lake-app-profiles">[I-D.tiloca-lake-app-profiles]</dt>
        <dd>
<span class="refAuthor">Tiloca, M.</span> and <span class="refAuthor">R. HÃ¶glund</span>, <span class="refTitle">"Coordinating the Use of Application Profiles for Ephemeral Diffie-Hellman Over COSE (EDHOC)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-tiloca-lake-app-profiles-03</span>, <time datetime="2024-10-21" class="refDate">21 October 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-tiloca-lake-app-profiles-03">https://datatracker.ietf.org/doc/html/draft-tiloca-lake-app-profiles-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="lwm2m">[lwm2m]</dt>
        <dd>
<span class="refAuthor">OMA SpecWorks</span>, <span class="refTitle">"White Paper â Lightweight M2M 1.1"</span>, <span>n.d.</span>, <span>&lt;<a href="https://omaspecworks.org/white-paper-lightweight-m2m-1-1/">https://omaspecworks.org/white-paper-lightweight-m2m-1-1/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="noproxy">[noproxy]</dt>
        <dd>
<span class="refAuthor">Hu, S.</span>, <span class="refTitle">"We need to talk: Can we standardize NO_PROXY?"</span>, <time datetime="2021-01-27" class="refDate">27 January 2021</time>, <span>&lt;<a href="https://about.gitlab.com/blog/2021/01/27/we-need-to-talk-no-proxy/">https://about.gitlab.com/blog/2021/01/27/we-need-to-talk-no-proxy/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1123">[RFC1123]</dt>
        <dd>
<span class="refAuthor">Braden, R., Ed.</span>, <span class="refTitle">"Requirements for Internet Hosts - Application and Support"</span>, <span class="seriesInfo">STD 3</span>, <span class="seriesInfo">RFC 1123</span>, <span class="seriesInfo">DOI 10.17487/RFC1123</span>, <time datetime="1989-10" class="refDate">October 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1123">https://www.rfc-editor.org/rfc/rfc1123</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2616">[RFC2616]</dt>
        <dd>
<span class="refAuthor">Fielding, R.</span>, <span class="refAuthor">Gettys, J.</span>, <span class="refAuthor">Mogul, J.</span>, <span class="refAuthor">Frystyk, H.</span>, <span class="refAuthor">Masinter, L.</span>, <span class="refAuthor">Leach, P.</span>, and <span class="refAuthor">T. Berners-Lee</span>, <span class="refTitle">"Hypertext Transfer Protocol -- HTTP/1.1"</span>, <span class="seriesInfo">RFC 2616</span>, <span class="seriesInfo">DOI 10.17487/RFC2616</span>, <time datetime="1999-06" class="refDate">June 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2616">https://www.rfc-editor.org/rfc/rfc2616</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="rfc3172">[rfc3172]</dt>
        <dd>
<span class="refAuthor">Huston, G., Ed.</span>, <span class="refTitle">"Management Guidelines &amp; Operational Requirements for the Address and Routing Parameter Area Domain ("arpa")"</span>, <span class="seriesInfo">BCP 52</span>, <span class="seriesInfo">RFC 3172</span>, <span class="seriesInfo">DOI 10.17487/RFC3172</span>, <time datetime="2001-09" class="refDate">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3172">https://www.rfc-editor.org/rfc/rfc3172</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4648">[RFC4648]</dt>
        <dd>
<span class="refAuthor">Josefsson, S.</span>, <span class="refTitle">"The Base16, Base32, and Base64 Data Encodings"</span>, <span class="seriesInfo">RFC 4648</span>, <span class="seriesInfo">DOI 10.17487/RFC4648</span>, <time datetime="2006-10" class="refDate">October 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5952">[RFC5952]</dt>
        <dd>
<span class="refAuthor">Kawamura, S.</span> and <span class="refAuthor">M. Kawashima</span>, <span class="refTitle">"A Recommendation for IPv6 Address Text Representation"</span>, <span class="seriesInfo">RFC 5952</span>, <span class="seriesInfo">DOI 10.17487/RFC5952</span>, <time datetime="2010-08" class="refDate">August 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5952">https://www.rfc-editor.org/rfc/rfc5952</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6698">[RFC6698]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">J. Schlyter</span>, <span class="refTitle">"The DNS-Based Authentication of Named Entities (DANE) Transport Layer Security (TLS) Protocol: TLSA"</span>, <span class="seriesInfo">RFC 6698</span>, <span class="seriesInfo">DOI 10.17487/RFC6698</span>, <time datetime="2012-08" class="refDate">August 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6698">https://www.rfc-editor.org/rfc/rfc6698</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7291">[RFC7291]</dt>
        <dd>
<span class="refAuthor">Boucadair, M.</span>, <span class="refAuthor">Penno, R.</span>, and <span class="refAuthor">D. Wing</span>, <span class="refTitle">"DHCP Options for the Port Control Protocol (PCP)"</span>, <span class="seriesInfo">RFC 7291</span>, <span class="seriesInfo">DOI 10.17487/RFC7291</span>, <time datetime="2014-07" class="refDate">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7291">https://www.rfc-editor.org/rfc/rfc7291</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7301">[RFC7301]</dt>
        <dd>
<span class="refAuthor">Friedl, S.</span>, <span class="refAuthor">Popov, A.</span>, <span class="refAuthor">Langley, A.</span>, and <span class="refAuthor">E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time datetime="2014-07" class="refDate">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7301">https://www.rfc-editor.org/rfc/rfc7301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7838">[RFC7838]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refAuthor">McManus, P.</span>, and <span class="refAuthor">J. Reschke</span>, <span class="refTitle">"HTTP Alternative Services"</span>, <span class="seriesInfo">RFC 7838</span>, <span class="seriesInfo">DOI 10.17487/RFC7838</span>, <time datetime="2016-04" class="refDate">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7838">https://www.rfc-editor.org/rfc/rfc7838</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8323">[RFC8323]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Lemay, S.</span>, <span class="refAuthor">Tschofenig, H.</span>, <span class="refAuthor">Hartke, K.</span>, <span class="refAuthor">Silverajan, B.</span>, and <span class="refAuthor">B. Raymor, Ed.</span>, <span class="refTitle">"CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets"</span>, <span class="seriesInfo">RFC 8323</span>, <span class="seriesInfo">DOI 10.17487/RFC8323</span>, <time datetime="2018-02" class="refDate">February 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8323">https://www.rfc-editor.org/rfc/rfc8323</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8552">[RFC8552]</dt>
        <dd>
<span class="refAuthor">Crocker, D.</span>, <span class="refTitle">"Scoped Interpretation of DNS Resource Records through "Underscored" Naming of Attribute Leaves"</span>, <span class="seriesInfo">BCP 222</span>, <span class="seriesInfo">RFC 8552</span>, <span class="seriesInfo">DOI 10.17487/RFC8552</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8552">https://www.rfc-editor.org/rfc/rfc8552</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9176">[RFC9176]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C., Ed.</span>, <span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Koster, M.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">P. van der Stok</span>, <span class="refTitle">"Constrained RESTful Environments (CoRE) Resource Directory"</span>, <span class="seriesInfo">RFC 9176</span>, <span class="seriesInfo">DOI 10.17487/RFC9176</span>, <time datetime="2022-04" class="refDate">April 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9176">https://www.rfc-editor.org/rfc/rfc9176</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="rfc9176">[rfc9176]</dt>
        <dd>
<span class="refAuthor">AmsÃ¼ss, C., Ed.</span>, <span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Koster, M.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">P. van der Stok</span>, <span class="refTitle">"Constrained RESTful Environments (CoRE) Resource Directory"</span>, <span class="seriesInfo">RFC 9176</span>, <span class="seriesInfo">DOI 10.17487/RFC9176</span>, <time datetime="2022-04" class="refDate">April 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9176">https://www.rfc-editor.org/rfc/rfc9176</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9200">[RFC9200]</dt>
        <dd>
<span class="refAuthor">Seitz, L.</span>, <span class="refAuthor">Selander, G.</span>, <span class="refAuthor">Wahlstroem, E.</span>, <span class="refAuthor">Erdtman, S.</span>, and <span class="refAuthor">H. Tschofenig</span>, <span class="refTitle">"Authentication and Authorization for Constrained Environments Using the OAuth 2.0 Framework (ACE-OAuth)"</span>, <span class="seriesInfo">RFC 9200</span>, <span class="seriesInfo">DOI 10.17487/RFC9200</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9200">https://www.rfc-editor.org/rfc/rfc9200</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9461">[RFC9461]</dt>
        <dd>
<span class="refAuthor">Schwartz, B.</span>, <span class="refTitle">"Service Binding Mapping for DNS Servers"</span>, <span class="seriesInfo">RFC 9461</span>, <span class="seriesInfo">DOI 10.17487/RFC9461</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9461">https://www.rfc-editor.org/rfc/rfc9461</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9462">[RFC9462]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Kinnear, E.</span>, <span class="refAuthor">Wood, C. A.</span>, <span class="refAuthor">McManus, P.</span>, and <span class="refAuthor">T. Jensen</span>, <span class="refTitle">"Discovery of Designated Resolvers"</span>, <span class="seriesInfo">RFC 9462</span>, <span class="seriesInfo">DOI 10.17487/RFC9462</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9462">https://www.rfc-editor.org/rfc/rfc9462</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9463">[RFC9463]</dt>
        <dd>
<span class="refAuthor">Boucadair, M., Ed.</span>, <span class="refAuthor">Reddy.K, T., Ed.</span>, <span class="refAuthor">Wing, D.</span>, <span class="refAuthor">Cook, N.</span>, and <span class="refAuthor">T. Jensen</span>, <span class="refTitle">"DHCP and Router Advertisement Options for the Discovery of Network-designated Resolvers (DNR)"</span>, <span class="seriesInfo">RFC 9463</span>, <span class="seriesInfo">DOI 10.17487/RFC9463</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9463">https://www.rfc-editor.org/rfc/rfc9463</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="rfc9476">[rfc9476]</dt>
        <dd>
<span class="refAuthor">Kumari, W.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"The .alt Special-Use Top-Level Domain"</span>, <span class="seriesInfo">RFC 9476</span>, <span class="seriesInfo">DOI 10.17487/RFC9476</span>, <time datetime="2023-09" class="refDate">September 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9476">https://www.rfc-editor.org/rfc/rfc9476</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SUIB">[SUIB]</dt>
        <dd>
<span class="refTitle">"Router and IoT Vulnerabilities: Insecure by Design"</span>, <time datetime="2021" class="refDate">2021</time>, <span>&lt;<a href="https://manysecured.net/wp-content/uploads/2022/09/ManySecured-SUIB-White-Paper.pdf">https://manysecured.net/wp-content/uploads/2022/09/ManySecured-SUIB-White-Paper.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="w3address">[w3address]</dt>
      <dd>
<span class="refAuthor">BL, T.</span>, <span class="refTitle">"W3 address syntax: BNF"</span>, <time datetime="1992-06-29" class="refDate">29 June 1992</time>, <span>&lt;<a href="http://info.cern.ch/hypertext/WWW/Addressing/BNF.html#43">http://info.cern.ch/hypertext/WWW/Addressing/BNF.html#43</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="change-log">
<section id="appendix-A">
      <h2 id="name-change-log">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-change-log" class="section-name selfRef">Change log</a>
      </h2>
<p id="appendix-A-1"><span class="cref" id="remove-changelog">This section is to be removed before publication.</span><a href="#appendix-A-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-2">Since draft-ietf-core-transport-indication-08:<a href="#appendix-A-2" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-3.1">
          <p id="appendix-A-3.1.1">Explicitly become an SVCB mapping document for the CoAP schemes.<a href="#appendix-A-3.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-3.2">
          <p id="appendix-A-3.2.1">Remove coaptransport parameter; instead, request ALPNs for remaining protocols.<a href="#appendix-A-3.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-3.3">
          <p id="appendix-A-3.3.1">Point out issue about some metadata pertaining to transport choices and some metadata pertaining to the server itself.<a href="#appendix-A-3.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-3.4">
          <p id="appendix-A-3.4.1">Acknowledge that there is structure (eg. in SVCB lookups) that is conceptually flattened.<a href="#appendix-A-3.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-3.5">
          <p id="appendix-A-3.5.1">Sulkily accept DNS-over-CoAP reaching into target names as an exception in security requirements.<a href="#appendix-A-3.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-3.6">
          <p id="appendix-A-3.6.1">Editorial updates.<a href="#appendix-A-3.6.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-4">Since draft-ietf-core-transport-indication-07:<a href="#appendix-A-4" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-5.1">
          <p id="appendix-A-5.1.1">Update sections 1 and 2:<a href="#appendix-A-5.1.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-5.1.2.1">
              <p id="appendix-A-5.1.2.1.1">Work more explicitly with 7252's resolution services.<a href="#appendix-A-5.1.2.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-5.1.2.2">
              <p id="appendix-A-5.1.2.2.1">List (coarsely) the information received from resolution services.<a href="#appendix-A-5.1.2.2.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-5.1.2.3">
              <p id="appendix-A-5.1.2.3.1">Homogenize treatment of proxy URIs and other resolution service outcomes.<a href="#appendix-A-5.1.2.3.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-5.1.2.4">
              <p id="appendix-A-5.1.2.4.1">Point out parallels to /etc/hosts.<a href="#appendix-A-5.1.2.4.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="appendix-A-5.2">
          <p id="appendix-A-5.2.1">Phrase possible differences w/rt hop-to-hop vs. end-to-end encryption more carefully.<a href="#appendix-A-5.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-5.3">
          <p id="appendix-A-5.3.1">SVCB: Rename edhoc-cred to cred.<a href="#appendix-A-5.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-5.4">
          <p id="appendix-A-5.4.1">Rework literals following discussion around onion-coap.<a href="#appendix-A-5.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-5.5">
          <p id="appendix-A-5.5.1">Point out the fates of appendices.<a href="#appendix-A-5.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-5.6">
          <p id="appendix-A-5.6.1">Editorial fixes.<a href="#appendix-A-5.6.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-6">Since draft-ietf-core-transport-indication-06:<a href="#appendix-A-6" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-7.1">
          <p id="appendix-A-7.1.1">Split introduction into terminology (with new definitions), goals and concepts.<a href="#appendix-A-7.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.2">
          <p id="appendix-A-7.2.1">Add principle of operation into abstract, elevating SVCB and has-proxy to equally ranked sources of endpoint information.<a href="#appendix-A-7.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.3">
          <p id="appendix-A-7.3.1">Restructure document to split overview and operations from the concrete methods of obtaining endpoints.<a href="#appendix-A-7.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.4">
          <p id="appendix-A-7.4.1">Add is-unique-proxy SVCB parameter equivalent to has-unique-proxy relation.<a href="#appendix-A-7.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.5">
          <p id="appendix-A-7.5.1">Remove <code>_coaps</code> service, describing <code>_coap</code> as applying to all CoAP transports.<a href="#appendix-A-7.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.6">
          <p id="appendix-A-7.6.1">Add SVCB to abstract.<a href="#appendix-A-7.6.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.7">
          <p id="appendix-A-7.7.1">Remove distracting text on URIs identifying transports/endpoints.<a href="#appendix-A-7.7.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.8">
          <p id="appendix-A-7.8.1">Editorial changes.<a href="#appendix-A-7.8.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-7.9">
          <p id="appendix-A-7.9.1">IANA considerations: Set change controller to IETF.<a href="#appendix-A-7.9.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-8">Since draft-ietf-core-transport-indication-05:<a href="#appendix-A-8" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-9.1">
          <p id="appendix-A-9.1.1">Semantics for where a has-proxy applies were changed from "wherever there is a <code>hosts</code> relation" to "across the same origin".<a href="#appendix-A-9.1.1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-9.1.2">
The <code>hosts</code> relation has received complaints about its complexity,
and there were no strong voices in either direction during or after IETF119 when the question has been asked;
going for the easier version.<a href="#appendix-A-9.1.2" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-9.2">
          <p id="appendix-A-9.2.1">Use of SVCB is added as a section. Underscore prefixes are registered for CoAP, enabling the use of SVCB DNS records for applications that opt in to it (rather than processing it as an alternative history).<a href="#appendix-A-9.2.1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-9.2.2">
While the alternative history section was appreciated during IETF119,
the authors found it highly impractical to provide SVCB ground work without having the actual registrations
(it would have worked only because DNS discovery acts on a separate <code>_dns</code> prefix anyway),
and chose the consistent approach of allowing SVCB lookups.<a href="#appendix-A-9.2.2" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-9.3">
          <p id="appendix-A-9.3.1">Material from the DNS and DNR for CoAP documents was moved in (and overhauled in the process):<a href="#appendix-A-9.3.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-9.3.2.1">
              <p id="appendix-A-9.3.2.1.1">Constructing CoAP requests from Service Parameters that did not result from a host name lookup is described.<a href="#appendix-A-9.3.2.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-9.3.2.2">
              <p id="appendix-A-9.3.2.2.1">The coaptransport SVCB parameter is defined.<a href="#appendix-A-9.3.2.2.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-9.3.2.3">
              <p id="appendix-A-9.3.2.3.1">SVCB hints for ACE/OAuth are defined.<a href="#appendix-A-9.3.2.3.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="appendix-A-9.4">
          <p id="appendix-A-9.4.1">Section on how a host can tell that Uri-Host is optional was moved from Open Questions into a section.<a href="#appendix-A-9.4.1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-9.4.2">
This had been around for ages,
and gathering some more experience with the matter,
looks like the obvious approach.<a href="#appendix-A-9.4.2" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-9.5">
          <p id="appendix-A-9.5.1">Editorial:<a href="#appendix-A-9.5.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-9.5.2.1">
              <p id="appendix-A-9.5.2.1.1">Style for unallocated registrations changed from TBD to CPA<a href="#appendix-A-9.5.2.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-9.5.2.2">
              <p id="appendix-A-9.5.2.2.1">References updated<a href="#appendix-A-9.5.2.2.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-9.5.2.3">
              <p id="appendix-A-9.5.2.3.1">Tooling updates<a href="#appendix-A-9.5.2.3.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-9.5.2.4">
              <p id="appendix-A-9.5.2.4.1">Minor fixes<a href="#appendix-A-9.5.2.4.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
</li>
      </ul>
<p id="appendix-A-10">Since draft-ietf-core-transport-indication-04:<a href="#appendix-A-10" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-11.1">
          <p id="appendix-A-11.1.1">Not just the scheme, but also the authority value influences the transport selection.<a href="#appendix-A-11.1.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-11.1.2.1">
              <p id="appendix-A-11.1.2.1.1">Add guidance section for new transports.<a href="#appendix-A-11.1.2.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-A-11.1.2.2">
              <p id="appendix-A-11.1.2.2.1">Point out that registerd names already can fan out to different addresses.<a href="#appendix-A-11.1.2.2.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="appendix-A-11.2">
          <p id="appendix-A-11.2.1">Rephrase and simplify security considerations, especially by limiting unique proxying for TLS.<a href="#appendix-A-11.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.3">
          <p id="appendix-A-11.3.1">Add recommendation to new scheme authors to use "coap"/"coaps" and let the resolution process guide the selection.<a href="#appendix-A-11.3.1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-11.3.2.1">
              <p id="appendix-A-11.3.2.1.1">Remove proxy-schemes attribute from core.proxy because of its greatly reduced value.<a href="#appendix-A-11.3.2.1.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="appendix-A-11.4">
          <p id="appendix-A-11.4.1">Update "Related work" appendix to cover SVCB instead of SRV records<a href="#appendix-A-11.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.5">
          <p id="appendix-A-11.5.1">Rename to "Transport Indication", using "protocol" only for other protocols, in established phrases, or when referring to CoAP as a general protocol.<a href="#appendix-A-11.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.6">
          <p id="appendix-A-11.6.1">Add note linking CoAP-over-WS's .well-known/coap to dohpath<a href="#appendix-A-11.6.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.7">
          <p id="appendix-A-11.7.1">Remove OSCORE vs. unique-proxy open point<a href="#appendix-A-11.7.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.8">
          <p id="appendix-A-11.8.1">EDHOC EAD: Describe response option content<a href="#appendix-A-11.8.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-11.9">
          <p id="appendix-A-11.9.1">Editorial updates<a href="#appendix-A-11.9.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-12">Since draft-ietf-core-transport-indication-03:<a href="#appendix-A-12" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-13.1">
          <p id="appendix-A-13.1.1">Added appendices on alternative history and Literals beyond IP addresses.
The remaining document was not brought in sync with those new parts.<a href="#appendix-A-13.1.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-14">Since draft-ietf-core-transport-indication-02:<a href="#appendix-A-14" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-15.1">
          <p id="appendix-A-15.1.1">Added EAD appendix, adjusted security considerations to match.<a href="#appendix-A-15.1.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-16">Since draft-ietf-core-transport-indication-01:<a href="#appendix-A-16" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-17.1">
          <p id="appendix-A-17.1.1">Simplify same-host proxy behavior by referring to existing RFC7252 mandate.<a href="#appendix-A-17.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-17.2">
          <p id="appendix-A-17.2.1">proxy-links= lookup: Refer to prior art.<a href="#appendix-A-17.2.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-18">Since draft-ietf-core-transport-indication-00:<a href="#appendix-A-18" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-19.1">
          <p id="appendix-A-19.1.1">Add section on canonical URIs that are not necessarily reachable.<a href="#appendix-A-19.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-19.2">
          <p id="appendix-A-19.2.1">Clarify that the the "hosts" relation is followed transitively.<a href="#appendix-A-19.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-19.3">
          <p id="appendix-A-19.3.1">Cross reference with compatible multicast-notifications concept.<a href="#appendix-A-19.3.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-20">Since draft-amsuess-core-transport-indication-03:<a href="#appendix-A-20" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-21.1">
          <p id="appendix-A-21.1.1">No changes (merely changing the name after WG adoption)<a href="#appendix-A-21.1.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-22">Since -02 (mainly processing reviews from Marco and Klaus):<a href="#appendix-A-22" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-23.1">
          <p id="appendix-A-23.1.1">Acknowledge that 'coap://hostname/' is not the proxy but a URI that (in a particular phrasing) is used to stand in for the proxy's address (while it regularly identifies a resurce on the server)<a href="#appendix-A-23.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.2">
          <p id="appendix-A-23.2.1">Security: Referencing traffic misdirection already in the first security block.<a href="#appendix-A-23.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.3">
          <p id="appendix-A-23.3.1">Security: Add (incomplete) considerations for unique-proxy case.<a href="#appendix-A-23.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.4">
          <p id="appendix-A-23.4.1">Narrow down "unique" proxy semantics to those properties used by the client, allowing unique proxies to be co-hosted with forward proxies.<a href="#appendix-A-23.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.5">
          <p id="appendix-A-23.5.1">"Client picked proxies" clarified to merely illustrate how this is compatible with them.<a href="#appendix-A-23.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.6">
          <p id="appendix-A-23.6.1">Use of "hosts" relation sharpened.<a href="#appendix-A-23.6.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.7">
          <p id="appendix-A-23.7.1">Precision on how this does and does not consider changing transports.<a href="#appendix-A-23.7.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.8">
          <p id="appendix-A-23.8.1">"Related work" section demoted to appendix.<a href="#appendix-A-23.8.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.9">
          <p id="appendix-A-23.9.1">Add note on DTLS session resumption.<a href="#appendix-A-23.9.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.10">
          <p id="appendix-A-23.10.1">Variable renaming.<a href="#appendix-A-23.10.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-23.11">
          <p id="appendix-A-23.11.1">Various editorial fixes.<a href="#appendix-A-23.11.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-24">Since -01:<a href="#appendix-A-24" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-25.1">
          <p id="appendix-A-25.1.1">Removed suggestion for generally trusted proxies;
now stating that with (D)TLS,
"a third party proxy can usually not satisfy [the security context propagation requirement]".<a href="#appendix-A-25.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-25.2">
          <p id="appendix-A-25.2.1">State more clearly that valid cache entries for resources aliased through has-unique-proxy can be used.<a href="#appendix-A-25.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-25.3">
          <p id="appendix-A-25.3.1">Added considerations for Multipath TCP.<a href="#appendix-A-25.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-25.4">
          <p id="appendix-A-25.4.1">Added concrete suggestion and example for advertisement of general proxies.<a href="#appendix-A-25.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-25.5">
          <p id="appendix-A-25.5.1">Added concrete suggestion for RD lookup extension that provides proxies.<a href="#appendix-A-25.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-25.6">
          <p id="appendix-A-25.6.1">Minor editorial and example changes.<a href="#appendix-A-25.6.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="appendix-A-26">Since -00:<a href="#appendix-A-26" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-27.1">
          <p id="appendix-A-27.1.1">Added introduction<a href="#appendix-A-27.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.2">
          <p id="appendix-A-27.2.1">Added examples<a href="#appendix-A-27.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.3">
          <p id="appendix-A-27.3.1">Added SCHC analogy<a href="#appendix-A-27.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.4">
          <p id="appendix-A-27.4.1">Expanded security considerations<a href="#appendix-A-27.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.5">
          <p id="appendix-A-27.5.1">Added guidance on choice of transport, and canonical addresses<a href="#appendix-A-27.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.6">
          <p id="appendix-A-27.6.1">Added subsection on interaction with a Resource Directory<a href="#appendix-A-27.6.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.7">
          <p id="appendix-A-27.7.1">Added comparisons with related work, including rdlink and DNS-SD sketches<a href="#appendix-A-27.7.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.8">
          <p id="appendix-A-27.8.1">Added IANA considerations<a href="#appendix-A-27.8.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="appendix-A-27.9">
          <p id="appendix-A-27.9.1">Added section on open questions<a href="#appendix-A-27.9.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="related-work-and-applicability-to-related-fields">
<section id="appendix-B">
      <h2 id="name-related-work-and-applicabil">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-related-work-and-applicabil" class="section-name selfRef">Related work and applicability to related fields</a>
      </h2>
<p id="appendix-B-1"><span class="cref" id="remove-relatedwork">This section is to be removed before submission to the IESG, with at least the MP-TCP section worked into corr-clar.</span><a href="#appendix-B-1" class="pilcrow">Â¶</a></p>
<div id="on-http">
<section id="appendix-B.1">
        <h3 id="name-on-http">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-on-http" class="section-name selfRef">On HTTP</a>
        </h3>
<p id="appendix-B.1-1">The mechanisms introduced here are similar to the Alt-Svc header of <span>[<a href="#RFC7838" class="cite xref">RFC7838</a>]</span>
in that they do not create different application-visible addresses,
but provide dispatch through lower transport implementations.<a href="#appendix-B.1-1" class="pilcrow">Â¶</a></p>
<p id="appendix-B.1-2">In HTTP, different versions of the protocol (i.e., different transports)
are distinguished using a protocol identifier equivalent to an ALPN.
This works well because all relevant transports use transport layer security and thus can use ALPNs.
In contrast, the currently specified CoAP transports predate ALPNs,
and specified per-transport schemes, which enable the use of URIs that indicate transports.<a href="#appendix-B.1-2" class="pilcrow">Â¶</a></p>
<p id="appendix-B.1-3">To accommodate the message size constraints typical of CoRE environments,
and accounting for the differences between HTTP headers and CoAP options,
information is delivered once at discovery time.<a href="#appendix-B.1-3" class="pilcrow">Â¶</a></p>
<p id="appendix-B.1-4">Using the has-proxy and has-unique-proxy with HTTP URIs as the context is NOT RECOMMENDED;
the HTTP provisions of the Alt-Svc header and ALPN are preferred.<a href="#appendix-B.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="using-dns">
<section id="appendix-B.2">
        <h3 id="name-using-dns">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-using-dns" class="section-name selfRef">Using DNS</a>
        </h3>
<p id="appendix-B.2-1">DNS Service Binding resource records (SVCB RRs)
described in <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> can carry many of the details otherwise negotiated using the proxy relations.
In HTTP, they can be used in a way similar to Alt-Svc headers.<a href="#appendix-B.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-B.2-2">SVCB records were not specified when CoAP was specified for TCP.<a href="#appendix-B.2-2" class="pilcrow">Â¶</a></p>
<p id="appendix-B.2-3">If at any point SVCB records for CoAP are defined,
name resolution produces a set of transport details that can be used immediately
without the need for a <code>has-proxy</code> link.
Explicit <code>has-proxy</code> links would still be relevant for third party advertised proxies.<a href="#appendix-B.2-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="using-names-outside-regular-dns">
<section id="appendix-B.3">
        <h3 id="name-using-names-outside-regular">
<a href="#appendix-B.3" class="section-number selfRef">B.3. </a><a href="#name-using-names-outside-regular" class="section-name selfRef">Using names outside regular DNS</a>
        </h3>
<p id="appendix-B.3-1">Names that are resolved through different mechanisms than DNS,
or names which are defined within the scope of DNS but have no universally valid answers to A/AAAA requests,
can be advertised using the relation types defined here and CoAP discovery.<a href="#appendix-B.3-1" class="pilcrow">Â¶</a></p>
<p id="appendix-B.3-2">In <a href="#fig-rdlink" class="auto internal xref">Figure 5</a>, a server using a cryptographic name as described in <span>[<a href="#I-D.amsuess-t2trg-rdlink" class="cite xref">I-D.amsuess-t2trg-rdlink</a>]</span> is discovered and used.<a href="#appendix-B.3-2" class="pilcrow">Â¶</a></p>
<span id="name-obtaining-a-sensor-value-fr"></span><div id="fig-rdlink">
<figure id="figure-5">
          <div class="alignLeft art-text artwork" id="appendix-B.3-3.1">
<pre>
Req: to [ff02::fd]:5683 on UDP
Code: GET
Uri-Path: /.well-known/core
Uri-Query: rel=has-proxy
Uri-Query: anchor=coap://nbswy3dpo5xxe3denbswy3dpo5xxe3de.ab.rdlink.arpa

Res: from [2001:db8::1]:5683
Content-Format: application/link-format
Payload:
&lt;coap+tcp://[2001:db8::1]&gt;;rel=has-unique-proxy;
  anchor="coap://nbswy3dpo5xxe3denbswy3dpo5xxe3de.ab.rdlink.arpa"


Req: to [2001:db8::1]:5683 on TCP
Code: GET
OSCORE: ...
Uri-Path: /sensors/temp
Observe: 0

Res: 2.05 Content
OSCORE: ...
Observe: 0
Payload:
39.1Â°C
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-obtaining-a-sensor-value-fr" class="selfRef">Obtaining a sensor value from a local device with a global name</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="multipath-tcp">
<section id="appendix-B.4">
        <h3 id="name-multipath-tcp">
<a href="#appendix-B.4" class="section-number selfRef">B.4. </a><a href="#name-multipath-tcp" class="section-name selfRef">Multipath TCP</a>
        </h3>
<p id="appendix-B.4-1">When CoAP-over-TCP is used over Multipath TCP
and no Uri-Host option is sent,
the implicit assumption is that there is aliasing between URIs containing any of the endpoints' addresses.<a href="#appendix-B.4-1" class="pilcrow">Â¶</a></p>
<p id="appendix-B.4-2">As these are negotiated within MPTCP,
this works independently of this document's mechanisms.
As long as all the server's addresses are equally reachable,
there is no need to advertise multiple addresses that can later be discovered through MPTCP anyway.
When advertisements are long-lived and there is no single more stable address,
several available addresses can be advertised (independently of whether MPTCP is involved or not).
If a client uses an address that is merely a proxy address (and not a unique proxy address),
but during MPTCP finds out that the network location being accessed is actually an MPTCP alternative address of the used one,
the client MAY forego sending of the Proxy-Scheme and Uri-Path option.<a href="#appendix-B.4-2" class="pilcrow">Â¶</a></p>
<p id="appendix-B.4-3">[ This follows from multiple addresses being valid for that TCP connection;
at some point we may want to say something about what that means for the default value of the Uri-Host option --
maybe something like "has the default value of any of the associated addresses, but the server may only enable MPTCP if there is implicit aliasing between all of them" (similar to OSCORE's statement)?  ]<a href="#appendix-B.4-3" class="pilcrow">Â¶</a></p>
<p id="appendix-B.4-4">[ TBD: Do we need a section analog to this that deals with (D)TLS session resumption in absence of SNI? ]<a href="#appendix-B.4-4" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="open-questions-further-ideas">
<section id="appendix-C">
      <h2 id="name-open-questions-further-idea">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-open-questions-further-idea" class="section-name selfRef">Open Questions / further ideas</a>
      </h2>
<p id="appendix-C-1"><span class="cref" id="remove-openquestions">This section is to be either converted into concrete guidance, or removed before submission to the IESG.</span><a href="#appendix-C-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C-2.1">
          <p id="appendix-C-2.1.1">Advertising under a stable name:<a href="#appendix-C-2.1.1" class="pilcrow">Â¶</a></p>
<p id="appendix-C-2.1.2">
If a host wants to advertise its host name rather than its IP address during multicast, how does it best do that?<a href="#appendix-C-2.1.2" class="pilcrow">Â¶</a></p>
<p id="appendix-C-2.1.3">
Options, when answering from 2001:db8::1 to a request to ff02::fd are:<a href="#appendix-C-2.1.3" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-C-2.1.4">
<pre>
&lt;coap://myhostname/foo&gt;,...,
&lt;coap://[2001:db8::1]&gt;;rel=has-unique-proxy;anchor="coap://myhostname"
</pre><a href="#appendix-C-2.1.4" class="pilcrow">Â¶</a>
</div>
<p id="appendix-C-2.1.5">
which is verbose but formally clear, and<a href="#appendix-C-2.1.5" class="pilcrow">Â¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-C-2.1.6">
<pre>
&lt;/foo&gt;,...,
&lt;coap://[2001:db8::1]&gt;;rel=has-unique-proxy;anchor="coap://myhostname"
</pre><a href="#appendix-C-2.1.6" class="pilcrow">Â¶</a>
</div>
<p id="appendix-C-2.1.7">
which is compatible with unaware clients,
but its correctness with respect to canonical URIs needs to be argued by the client, in this sequence<a href="#appendix-C-2.1.7" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C-2.1.8.1">
              <p id="appendix-C-2.1.8.1.1">understanding the has-unique-proxy line,<a href="#appendix-C-2.1.8.1.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-C-2.1.8.2">
              <p id="appendix-C-2.1.8.2.1">understanding that the request that went to 2001:db8::1 was really a Proxy-Scheme/Uri-Host-elided version of a request to coap://myhostname, and then<a href="#appendix-C-2.1.8.2.1" class="pilcrow">Â¶</a></p>
</li>
            <li class="normal" id="appendix-C-2.1.8.3">
              <p id="appendix-C-2.1.8.3.1">processing any relative reference with this new base in mind.<a href="#appendix-C-2.1.8.3.1" class="pilcrow">Â¶</a></p>
</li>
          </ul>
<p id="appendix-C-2.1.9">
(Not that it'd need to happen in software in that sequence,
but that's the sequence needed to understand how the <code>/foo</code> here is really <code>coap://myhostname/foo</code>).<a href="#appendix-C-2.1.9" class="pilcrow">Â¶</a></p>
<p id="appendix-C-2.1.10">
If CoRAL is used during discovery, a base directive or reverse relation to has-unique-proxy would make this easier.<a href="#appendix-C-2.1.10" class="pilcrow">Â¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="ead">
<section id="appendix-D">
      <h2 id="name-edhoc-ead-for-verifying-leg">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-edhoc-ead-for-verifying-leg" class="section-name selfRef">EDHOC EAD for verifying legitimate proxies</a>
      </h2>
<p id="appendix-D-1"><span class="cref" id="remove-edhocead">This section is to be moved into another document, possibly <code>groupcomm-proxy</code>.</span><a href="#appendix-D-1" class="pilcrow">Â¶</a></p>
<p id="appendix-D-2">This document sketches an extension to <span>[<a href="#I-D.ietf-lake-edhoc" class="cite xref">I-D.ietf-lake-edhoc</a>]</span> that informs the server of the public address the client is using,
allowing it to detect undesired reverse proxies.<a href="#appendix-D-2" class="pilcrow">Â¶</a></p>
<p id="appendix-D-3">[ This section is immature, and written up as a discussion starting point. Further research into prior art is still necessary. ]<a href="#appendix-D-3" class="pilcrow">Â¶</a></p>
<p id="appendix-D-4">The External Authorization Data (EAD) item with name "Proxy CRI", label 24-CPA, is defined for use with messages 1, 2 and 3.<a href="#appendix-D-4" class="pilcrow">Â¶</a></p>
<p id="appendix-D-5">A client can set this label in uncritical form, followed by a CRI (<span>[<a href="#I-D.ietf-core-href" class="cite xref">I-D.ietf-core-href</a>]</span>) that is CBOR-encoded in a byte string as a CBOR sequence.
The transport indicated by the URI is the proxy the client chose from information advertised about the server.<a href="#appendix-D-5" class="pilcrow">Â¶</a></p>
<p id="appendix-D-6">If a server can not determine its set of legitimate proxies,
it ignores the option (as does any EDHOC implementation that is unaware of it).<a href="#appendix-D-6" class="pilcrow">Â¶</a></p>
<p id="appendix-D-7">If it recognizes the CRI as belonging to a legitimate proxy,
it places the empty label in its non-critical form in the next message to confirm the proxy choice.
Otherwise, it places the label in its critical form, either empty or containing a recommended CRI.
The client may then decide to discontinue using the proxy,
or to use more extensive padding options to sidestep the attack.
Both the client and the server may alert their administrators of a possible traffic misdirection.<a href="#appendix-D-7" class="pilcrow">Â¶</a></p>
<p id="appendix-D-8">[ While using an EDHOC EAD is suitable for connection setup,
   such a mechanism may also be useful at a later time,
   e.g. to re-check a server's address after a name change;
   establishing an equivalent CoAP option is being considered,
   also oin light of the discussion around https://github.com/core-wg/corrclar/pull/40 and https://github.com/core-wg/groupcomm-proxy/issues/3.
   ]<a href="#appendix-D-8" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="newlit">
<section id="appendix-E">
      <h2 id="name-literals-beyond-ip-addresse">
<a href="#appendix-E" class="section-number selfRef">Appendix E. </a><a href="#name-literals-beyond-ip-addresse" class="section-name selfRef">Literals beyond IP addresses</a>
      </h2>
<p id="appendix-E-1">[
This section is placed here preliminarily:
After initial review in CoRE, this may be better moved into a separate document aiming for a wider IETF audience.
]<a href="#appendix-E-1" class="pilcrow">Â¶</a></p>
<div id="motivation-for-new-literal-ish-names">
<section id="appendix-E.1">
        <h3 id="name-motivation-for-new-literal-">
<a href="#appendix-E.1" class="section-number selfRef">E.1. </a><a href="#name-motivation-for-new-literal-" class="section-name selfRef">Motivation for new literal-ish names</a>
        </h3>
<p id="appendix-E.1-1">IP literals were part of URIs from the start <span>[<a href="#w3address" class="cite xref">w3address</a>]</span>.
Initially, they were equivalent to host names in their expressiveness,
save for their inherent difference that the former can be used without a shared resolver,
and the latter can be switched to a different network address.<a href="#appendix-E.1-1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.1-2">This equivalence got lost gradually:
Certificates for TLS (its precursor SSL has been available since 1995 <span>[<a href="#evossl" class="cite xref">evossl</a>]</span>)

have only practically been available to host names.
The Host header introduced in HTTP 1.1 <span><a href="https://rfc-editor.org/rfc/rfc2616#section-14.23" class="relref">Section 14.23</a> of [<a href="#RFC2616" class="cite xref">RFC2616</a>]</span>
introduced name based virtual hosting in 1999.
DANE <span>[<a href="#RFC6698" class="cite xref">RFC6698</a>]</span>, which provides TLS public keys augmenting the or outside of the public key infrastructure,
is only available for host names resolved through DNSSEC.
SVCB records <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> introduced in 2023
allow starting newer HTTP transports without going through HTTP/1.1 first,
enables load balancing, fail-over,
and enable Encrypted Client Hello --
again, only for host names resolved through DNS.<a href="#appendix-E.1-2" class="pilcrow">Â¶</a></p>
<p id="appendix-E.1-3">This document proposes an expression for the host component of a URI
that fills that gap.
Note that no attempt is yet made to register <code>service.arpa</code> in the .ARPA Zone Management;
that name is used only for the purpose of discussion.<a href="#appendix-E.1-3" class="pilcrow">Â¶</a></p>
<p id="appendix-E.1-4"><span class="cref" id="prelim">The structure and even more the syntax used here is highly preliminary.
They serves to illustrate that the desired properties can be obtained,
and do not claim to be optimal.
As one of many aspects, they are missing considerations for normalization
and for internationalization.</span><a href="#appendix-E.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="structure-of-servicearpa">
<section id="appendix-E.2">
        <h3 id="name-structure-of-servicearpa">
<a href="#appendix-E.2" class="section-number selfRef">E.2. </a><a href="#name-structure-of-servicearpa" class="section-name selfRef">Structure of <code>service.arpa</code></a>
        </h3>
<p id="appendix-E.2-1">Names under service.arpa are structured into
an ordered list of key-value component pairs,
and the common suffix <code>service.arpa</code>.<a href="#appendix-E.2-1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-2">These pairs represent the very items also produced by <a href="#processing-scheme-authority" class="auto internal xref">Section 2.1</a>.
In the current version, they can <em>not</em> express multiple entries with different structures.
They can express different entries, but any repeated items (e.g. different ALPNs and IP addresses)
only produce their product
(i.e., no "TCP on this or that address, TLS on another").<a href="#appendix-E.2-2" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-3">Keeping with the style of DNS (least significant component first),
pairs are expressed with their data a first label, followed by the key in a separate label.
Data items ending with a "-" character are concatenated with their previous label to avoid overflowing the 63-octet limit of DNS
(even though those do not wind up in DNS serialization).<a href="#appendix-E.2-3" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-4">For example, "world.hello-.label.8080.port" contains,
in that order,
information about port 8080 and the label "helloworld".<a href="#appendix-E.2-4" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-5">Initial component types are:<a href="#appendix-E.2-5" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-E.2-6.1">
            <p id="appendix-E.2-6.1.1">"6": The value encodes an IPv6 address
in <span>[<a href="#RFC5952" class="cite xref">RFC5952</a>]</span> format, with the colon character (":") replaced with a dash ("-").<a href="#appendix-E.2-6.1.1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-6.1.2">
It indicates an address of a host providing the service.<a href="#appendix-E.2-6.1.2" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-6.1.3">
If any address information is present,
a client SHOULD use that information to access the service.<a href="#appendix-E.2-6.1.3" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.2-6.2">
            <p id="appendix-E.2-6.2.1">"4": The value encodes an IPv4 address
in dotted decimal format <span>[<a href="#RFC1123" class="cite xref">RFC1123</a>]</span>, with the dot character (".") replaced with a dash ("-").<a href="#appendix-E.2-6.2.1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-6.2.2">
It indicates an address of a host providing the service.<a href="#appendix-E.2-6.2.2" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.2-6.3">
            <p id="appendix-E.2-6.3.1">"tlsa": The data of a DNS TLSA record <span>[<a href="#RFC6698" class="cite xref">RFC6698</a>]</span> encoded in base32 <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>.<a href="#appendix-E.2-6.3.1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-6.3.2">
Depending on the usage, this describes TLS credentials through which the service can be authenticated.<a href="#appendix-E.2-6.3.2" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-6.3.3">
If present,
a client MUST establish a secure connection,
and MUST fail the connection if the TLSA record's requirements are not met.<a href="#appendix-E.2-6.3.3" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.2-6.4">
            <p id="appendix-E.2-6.4.1">"cred", "edhoc-info", "oauth-info": SvcbParams in base32 encoding of their wire format.<a href="#appendix-E.2-6.4.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.2-6.5">
            <p id="appendix-E.2-6.5.1">"alpn": The ALPN(s) in hexadecimal encoding, separated by dashes.<a href="#appendix-E.2-6.5.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
<p id="appendix-E.2-7">Due to <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>'s rules,
all components are case insensitive and canonically lowercase.<a href="#appendix-E.2-7" class="pilcrow">Â¶</a></p>
<p id="appendix-E.2-8">Note that while using the IPvFuture mechanism of <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span> would avoid compatibility issues around the 63 character limit
and some of the character restrictions,
it would not resolve the larger limitation of case insensitivity.<a href="#appendix-E.2-8" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="processing-servicearpa">
<section id="appendix-E.3">
        <h3 id="name-processing-servicearpa">
<a href="#appendix-E.3" class="section-number selfRef">E.3. </a><a href="#name-processing-servicearpa" class="section-name selfRef">Processing <code>service.arpa</code></a>
        </h3>
<p id="appendix-E.3-1">A client accessing a resource under a service.arpa name
does not consult DNS,
but obtains information equivalent to the results of a DNS query from parsing the name.<a href="#appendix-E.3-1" class="pilcrow">Â¶</a></p>
<p id="appendix-E.3-2">DNS resolvers should refuse to resolve service.arpa names.
(They would have all the information needed to produce sensible results,
but operational aspects would need a lot of consideration;
future versions of this document may revise this).<a href="#appendix-E.3-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="examples">
<section id="appendix-E.4">
        <h3 id="name-examples">
<a href="#appendix-E.4" class="section-number selfRef">E.4. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
        </h3>
<p id="appendix-E.4-1">TBD: For SvcParams, the examples are inconsistent with the base32 recommendation;
they serve to explore the possible alternatives.<a href="#appendix-E.4-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-E.4-2.1">
            <p id="appendix-E.4-2.1.1">http://683263.alpn.2001-db8--1.6.service.arpa/ -- The server is reachable on 2001:db8::1 using HTTP/2 (h2c is 683263 in hex)<a href="#appendix-E.4-2.1.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.4-2.2">
            <p id="appendix-E.4-2.2.1">https://amaqckrkfivcukrkfivcukrkfivcukrkfivcukrkfivcukrkfivcukrk.tlsa.service.arpa/ -- No address information is provided, the client needs to resort to other discovery mechanisms.
Any server is eligible to serve the resource if it can present a (possibly self-signed) certificate whose public key SHA256 matches the encoded value.<a href="#appendix-E.4-2.2.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.4-2.3">
            <p id="appendix-E.4-2.3.1">coap://434f4150.alpn.2001-db8--1.6.rai3ouj4a.ueekcandaeasabbblaqlxq2jmbjg5jgtf2kazljkenaurxocc6i2ckx3zowjgy-.cred.service.arpa/ -- The server is reachable using CoAP over TCP with any security mechanism at 2001:db8::1, and the service is identifiable by the use of a KCCS credential describing an X25519 public key (which is currently only usable with EDHOC).<a href="#appendix-E.4-2.3.1" class="pilcrow">Â¶</a></p>
</li>
          <li class="normal" id="appendix-E.4-2.4">
            <p id="appendix-E.4-2.4.1">coap://rai3ouj4a.ueekcandaeasabbblaqlxq2jmbjg5jgtf2kazljkenaurxocc6i2ckx3zowjgyr-.cred.service.arpa/ -- The same server without any discoverability hints; it is up to the client to discover a (possibly short-lived) connection opportunities to the server identified by that key.<a href="#appendix-E.4-2.4.1" class="pilcrow">Â¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-F">
      <h2 id="name-acknowledgements">
<a href="#appendix-F" class="section-number selfRef">Appendix F. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-F-1">This document heavily builds on concepts
explored by Bill Silverajan and Mert Ocak in <span>[<a href="#I-D.silverajan-core-coap-protocol-negotiation" class="cite xref">I-D.silverajan-core-coap-protocol-negotiation</a>]</span>,
and together with Ines Robles and Klaus Hartke inside T2TRG.<a href="#appendix-F-1" class="pilcrow">Â¶</a></p>
<p id="appendix-F-2">[ TBD: reviewers
Marco
Klaus
]<a href="#appendix-F-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-G">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christian AmsÃ¼ss</span></div>
<div dir="auto" class="left"><span class="country-name">Austria</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:christian@amsuess.com" class="email">christian@amsuess.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martine Sophie Lenders</span></div>
<div dir="auto" class="left"><span class="org">TUD Dresden University of Technology</span></div>
<div dir="auto" class="left"><span class="street-address">Helmholtzstr. 10</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-01069</span> <span class="locality">Dresden</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:martine.lenders@tu-dresden.de" class="email">martine.lenders@tu-dresden.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
